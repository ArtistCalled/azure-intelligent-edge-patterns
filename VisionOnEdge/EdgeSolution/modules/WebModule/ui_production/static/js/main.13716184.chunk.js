(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{688:function(e,t,n){e.exports=n(939)},697:function(e,t,n){},937:function(e,t,n){},939:function(e,t,n){"use strict";n.r(t);var a,r,c,o,l,i=n(0),u=n.n(i),s=n(41),d=n.n(s),m=n(22),p=n(467),g=(n(697),n(85)),f=n(468),E=n(469),h=n(259),b=n(470),v=n.n(b),y={dialogIsOpen:!1,cameras:[],locations:[],labelingPageState:{annotations:[]},part:{capturedImages:[],isValid:!0},project:{id:null,camera:null,location:null,parts:[],modelUrl:"",status:"",successRate:null,successfulInferences:null,unIdetifiedItems:null}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.cameras,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CAMERA_SUCCESS":return t.payload;case"REQUEST_CAMERA_FAILURE":return e;case"POST_CAMERA_SUCCESS":return e.concat(t.payload);case"DELETE_CAMERA_SUCCESS":var n=e.findIndex((function(e){return e.id===t.payload.id}));return-1!==n?e.slice(0,n).concat(e.slice(n+1)):e;default:return e}},j=n(183),S=n(24),C=(a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.part,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CAPTURED_IMAGE":return Object(S.a)({},e,{capturedImages:[].concat(Object(j.a)(e.capturedImages),[t.payload.newCapturedImage])});case"UPDATE_CAPTURED_IMAGES":return Object(S.a)({},e,{capturedImages:t.payload.capturedImages});case"UPDATE_IMAGE_LABEL":var n=Object(S.a)({},e),a=n.capturedImages.findIndex((function(e){return e.id===t.payload.id}));return n.capturedImages[a]=Object(S.a)({},n.capturedImages[a],{labels:t.payload.labels}),n;default:return e}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.part,t=arguments.length>1?arguments[1]:void 0,n=a(e,t),r=n.capturedImages.filter((function(e){return e.labels})).length>=15;return Object(S.a)({},n,{isValid:r})});!function(e){e.Empty="Empty",e.P1Added="P1Added",e.Finish="Finish"}(r||(r={})),function(e){e.default="default",e.pointer="pointer",e.crosshair="crosshair",e.neswResize="nesw-resize",e.nwseResize="nwse-resize"}(c||(c={})),function(e){e.Creating="Creating",e.Selecting="Selecting",e.None="None"}(o||(o={})),function(e){e[e.SingleAnnotation=0]="SingleAnnotation",e[e.MultiAnnotation=1]="MultiAnnotation"}(l||(l={}));var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.labelingPageState,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case"REQUEST_ANNOTATION_SUCCESS":n.annotations=t.payload.annotations;break;case"REQUEST_ANNOTATION_FAILURE":break;case"CREATE_ANNOTATION":n.annotations.push(t.payload.annotation);break;case"UPDATE_CREATING_ANNOTATION":var a=t.payload.updater(n.annotations[n.annotations.length-1]);a.annotationState===r.Finish&&((0|a.label.x1)===(0|a.label.x2)&&(0|a.label.y1)===(0|a.label.y2)?n.annotations.pop():(n.annotations[n.annotations.length-1]=a,n.annotations=Object(j.a)(n.annotations)));break;case"UPDATE_ANNOTATION":n.annotations[t.payload.index]=t.payload.annotation;break;case"REMOVE_ANNOTATION":if(null===t.payload.index){var c=window.confirm("Are you going to remove all annotations?");c&&(n.annotations=[])}n.annotations=n.annotations.slice(0,t.payload.index).concat(n.annotations.slice(t.payload.index+1));break;case"RESET_ANNOTATION":n.annotations=y.labelingPageState.annotations;break;default:return e}return n},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.locations,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOCATION_SUCCESS":return t.payload;case"REQUEST_LOCATION_FAILURE":return e;case"POST_LOCATION_SUCCESS":return e.concat(t.payload);default:return e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.dialogIsOpen,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_DIALOG":return!0;case"CLOSE_DIALOG":return!1;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.project,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROJECT_SUCCESS":return Object(S.a)({},t.payload.project);case"GET_PROJECT_FAILED":case"POST_PROJECT_SUCCESS":case"POST_PROJECT_FALIED":return Object(S.a)({},e);case"DELETE_PROJECT_SUCCESS":return{id:null,camera:null,location:null,parts:[],modelUrl:"",status:"",successRate:null,successfulInferences:null,unIdetifiedItems:null};case"DELETE_PROJECT_FALIED":default:return Object(S.a)({},e)}},T=Object(g.combineReducers)({cameras:O,locations:x,part:C,labelingPageState:I,dialogIsOpen:A,project:w}),k={key:"root",storage:v.a},P=Object(h.a)(k,T),_=function(e){var t=[f.a],n=g.applyMiddleware.apply(void 0,t),a=Object(E.composeWithDevTools)(n),r=Object(g.createStore)(P,e,a);return{store:r,persistor:Object(h.b)(r)}},R=n(31),N=n(236),D=n(130),L=n(160),M=n(78),U=n(84),z=function(e){var t=e.to,n=void 0===t?"":t,a=e.imgSrc,r=e.defaultSrc,c=e.bgImgSrc,o=e.label,l=void 0===o?"":o,i=e.imgPadding,s=void 0===i?"10px":i,d=e.width,m=void 0===d?"100px":d,p=e.height,g=void 0===p?"100px":p,f=e.bgImgStyle,E=e.pointerCursor,h=void 0!==E&&E,b=e.onClick;return u.a.createElement(L.a,{column:!0,styles:{width:m}},""===n?u.a.createElement("div",{style:{height:g},onClick:b},u.a.createElement(U.a,{src:null!==a&&void 0!==a?a:r,styles:Object(S.a)({padding:s,height:"100%",objectFit:"contain",backgroundImage:"url(".concat(c,")"),cursor:h?"pointer":"default"},f)})):u.a.createElement(R.b,{to:n},u.a.createElement("div",{style:{height:g},onClick:b},u.a.createElement(U.a,{src:null!==a&&void 0!==a?a:r,styles:Object(S.a)({padding:s,height:"100%",objectFit:"contain",backgroundImage:"url(".concat(c,")")},f)}))),u.a.createElement(M.a,{align:"center"},l))},F=function(){var e=Object(m.b)();return u.a.createElement(L.a,{column:!0,gap:"gap.medium"},u.a.createElement(M.a,{size:"larger",weight:"semibold"},"Hello User!"),u.a.createElement(M.a,null,"I understand a ship to be made for the carrying and preservation of the cargo, and so long as the ship can be saved, with the cargo, it should never be abandoned. This Union likewise should never be abandoned unless it fails and the possibility of its preservation shall cease to exist, without throwing passengers and cargo overboard."),u.a.createElement(M.a,{color:"white",styles:{backgroundColor:"#373644",padding:"2px 2px 2px 10px"}},"GET STARTED:"),u.a.createElement(L.a,{gap:"gap.large"},u.a.createElement(z,{imgSrc:"/icons/location-filled.png",to:"/locations/register",label:"Register a new Location",width:"100px"}),u.a.createElement(z,{imgSrc:"/icons/camera-filled.png",to:"/cameras",label:"Register a new Camera",width:"100px",imgPadding:"10px 3px 10px 3px",onClick:function(){e({type:"OPEN_DIALOG"})}}),u.a.createElement(z,{imgSrc:"/icons/part-filled.png",to:"/parts/detail",label:"Register a new Part",width:"100px"})),u.a.createElement(M.a,{color:"white",styles:{backgroundColor:"#373644",padding:"2px 2px 2px 10px"}},"SELECT FROM THE FOLLOWING TASKS:"),u.a.createElement(L.a,{gap:"gap.large"},u.a.createElement(z,{imgSrc:"/icons/doubleCube.png",to:"/partIdentification",label:"Identify Parts",width:"100px"}),u.a.createElement(z,{imgSrc:"/icons/defects.png",to:"/",label:"Identify Defects",width:"100px"}),u.a.createElement(z,{imgSrc:"/icons/manual-filled.png",to:"/manual",label:"Identify items manually",width:"100px"})))},G=n(17),V=n(228),J=n(238),H=n(67),B=n(21),W=n(175),Q=n(80),K=n.n(Q),Y=function(e){return console.error(e),{type:"REQUEST_CAMERA_FAILURE"}},X=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.cameras}));return Object(i.useEffect)((function(){e((function(e){return K()("/api/cameras/").then((function(t){var n=t.data;e(function(e){return{type:"GET_CAMERA_SUCCESS",payload:e}}(n))})).catch((function(t){e(Y(t))}))}))}),[e]),t},$=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.dialogIsOpen})),n=X(),a=Object(i.useState)(""),r=Object(G.a)(a,2),c=r[0],o=r[1],l=Object(i.useState)(""),s=Object(G.a)(l,2),d=s[0],p=s[1],g=Object(i.useState)(""),f=Object(G.a)(g,2),E=f[0],h=f[1];return u.a.createElement(L.a,{column:!0,gap:"gap.large",padding:"padding.medium",styles:{height:"100%"}},u.a.createElement(V.a,{columns:"8",styles:{height:"75%"}},n.map((function(e,t){return u.a.createElement(z,{key:t,to:"/cameras/".concat(e.name),defaultSrc:"/icons/Play.png",bgImgSrc:"/icons/defaultCamera.png",width:"100px",height:"100px",bgImgStyle:{backgroundSize:"60%",backgroundPosition:"center",backgroundRepeat:"no-repeat"},label:e.name})}))),u.a.createElement(J.a,{trigger:u.a.createElement(L.a,{hAlign:"end"},u.a.createElement(H.a,{primary:!0,fluid:!0,circular:!0,content:u.a.createElement(B.AddIcon,{size:"largest",circular:!0}),style:{width:"6rem",height:"6rem"}})),confirmButton:"Submit",onConfirm:function(){var t;e((t={name:c,rtsp:d,model_name:E},function(e){return K()("/api/cameras/",{method:"POST",data:t}).then((function(t){var n=t.data;e(function(e){return{type:"POST_CAMERA_SUCCESS",payload:e}}(n))})).catch((function(t){e(Y(t))}))})),e({type:"CLOSE_DIALOG"})},cancelButton:"Cancel",header:"Add Camera",open:t,onOpen:function(){e({type:"OPEN_DIALOG"})},onCancel:function(){e({type:"CLOSE_DIALOG"})},content:u.a.createElement(L.a,{column:!0,gap:"gap.small"},u.a.createElement(W.a,{placeholder:"Name",value:c,onChange:function(e,t){return o(t.value)}}),u.a.createElement(W.a,{placeholder:"RTSP URL",value:d,onChange:function(e,t){return p(t.value)}}),u.a.createElement(W.a,{placeholder:"Model Name",value:E,onChange:function(e,t){return h(t.value)}}))}))},q=function(e){var t=e.id,n=e.name,a=e.rtsp,r=e.modelName,c=Object(m.b)();return u.a.createElement(L.a,{styles:{padding:"1rem 2rem"},column:!0,space:"between"},u.a.createElement(V.a,{columns:"2",styles:{gap:"3rem"}},u.a.createElement(M.a,{size:"larger",weight:"semibold"},"Details"),u.a.createElement(z,{defaultSrc:"/icons/defaultCamera.png",width:"100px",height:"100px"}),u.a.createElement(L.a,{column:!0,gap:"gap.small"},u.a.createElement(M.a,{size:"large",content:"Name:"}),u.a.createElement(M.a,{size:"large",content:"RTSP Url:"}),u.a.createElement(M.a,{size:"large",content:"Model:"})),u.a.createElement(L.a,{column:!0,gap:"gap.medium"},u.a.createElement(M.a,{size:"large",content:n}),u.a.createElement(M.a,{size:"large",content:a}),u.a.createElement(M.a,{size:"large",content:r}))),u.a.createElement(H.a,{primary:!0,content:"Delete Camera",styles:{backgroundColor:"#C4314B",":hover":{backgroundColor:"#A72037"}},onClick:function(){c(function(e){return function(t){return K()("/api/cameras/".concat(e,"/"),{method:"DELETE"}).then((function(){t(function(e){return{type:"DELETE_CAMERA_SUCCESS",payload:{id:e}}}(e))})).catch((function(e){t(Y(e))}))}}(t))}}))},Z=n(106),ee=n(239),te=function(e,t){var n=Object(i.useRef)(null);Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},ne=function(){return function(e){return K.a.get("/api/projects/").then((function(t){var n,a,r,c,o,l,i,u,s,d,m,p,g,f,E,h,b,v,y=t.data;console.log(y);var O={id:null!==(n=null===(a=y[0])||void 0===a?void 0:a.id)&&void 0!==n?n:null,camera:null!==(r=parseInt(null===(c=y[0])||void 0===c?void 0:c.camera.split("/")[5],10))&&void 0!==r?r:null,location:null!==(o=parseInt(null===(l=y[0])||void 0===l?void 0:l.location.split("/")[5],10))&&void 0!==o?o:null,parts:null!==(i=null===(u=y[0])||void 0===u?void 0:u.parts.map((function(e){return parseInt(e.split("/")[5],10)})))&&void 0!==i?i:[],modelUrl:null!==(s=null===(d=y[0])||void 0===d?void 0:d.training_uri)&&void 0!==s?s:"",status:null!==(m=null===(p=y[0])||void 0===p?void 0:p.status)&&void 0!==m?m:"offline",successRate:null!==(g=null===(f=y[0])||void 0===f?void 0:f.successRate)&&void 0!==g?g:0,successfulInferences:null!==(E=null===(h=y[0])||void 0===h?void 0:h.successfulInferences)&&void 0!==E?E:0,unIdetifiedItems:null!==(b=null===(v=y[0])||void 0===v?void 0:v.unIdetifiedItems)&&void 0!==b?b:0};e(function(e){return{type:"GET_PROJECT_SUCCESS",payload:{project:e}}}(O))})).catch((function(t){console.error(t),e({type:"GET_PROJECT_FAILED"})}))}},ae=function(){var e=Object(m.c)((function(e){return e.project})),t=Object(m.b)(),n=Object(D.i)(),a=n.projectId,r=n.name,c=Object(D.g)();return te((function(){K.a.get("/api/projects/".concat(a,"/export"))}),5e3),te((function(){t(ne())}),e.modelUrl?null:5e3),u.a.createElement(L.a,{column:!0,gap:"gap.large"},u.a.createElement("h1",null,"Configuration"),e.modelUrl?u.a.createElement(u.a.Fragment,null,u.a.createElement(re,{title:"Status",content:u.a.createElement(ce,{online:"online"===e.status})}),u.a.createElement(re,{title:"Configured for",content:e.parts.join(", ")}),u.a.createElement("span",null,"Model Url: "),u.a.createElement("a",{href:e.modelUrl},e.modelUrl),u.a.createElement(L.a,{column:!0,gap:"gap.small"},u.a.createElement(M.a,{styles:{width:"150px"},size:"large"},"Live View:"),u.a.createElement(L.a,{styles:{width:"80%",height:"400px",backgroundColor:"rgb(188, 188, 188)"},vAlign:"center",hAlign:"center"},u.a.createElement(U.a,{src:"/icons/Play.png",styles:{":hover":{cursor:"pointer"}}}))),u.a.createElement(re,{title:"Success Rate",content:u.a.createElement(M.a,{styles:{color:"rgb(244, 152, 40)",fontWeight:"bold"},size:"large"},"".concat(e.successRate,"%"))}),u.a.createElement(re,{title:"Successful Inferences",content:e.successfulInferences}),u.a.createElement(re,{title:"Unidentified Items",content:u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{styles:{margin:"5px"},size:"large"},e.unIdetifiedItems),u.a.createElement(H.a,{content:"Identify Manually",primary:!0,styles:{backgroundColor:"red",marginLeft:"100px",":hover":{backgroundColor:"#A72037"},":active":{backgroundColor:"#8E192E"}},as:R.b,to:"/"}))}),u.a.createElement(H.a,{primary:!0,onClick:function(){confirm("Delete this configuration?")&&t(function(e){return function(t){return K.a.delete("/api/projects/".concat(e,"/")).then((function(){return t({type:"DELETE_PROJECT_SUCCESS"})})).catch((function(e){alert(e),t({type:"DELETE_PROJECT_FALIED"})}))}}(a)).then((function(e){if(e)return c.push("/cameras/".concat(r))})).catch((function(e){return console.error(e)}))}},"Delete Configuration")):u.a.createElement(Z.a,{size:"largest",label:"Trainning",labelPosition:"below",design:{paddingTop:"300px"}}))},re=function(e){var t=e.title,n=e.content;return u.a.createElement(L.a,{vAlign:"center"},u.a.createElement(M.a,{styles:{width:"200px"},size:"large"},"".concat(t,": ")),"string"===typeof n||"number"===typeof n?u.a.createElement(M.a,{size:"large"},n):n)},ce=function(e){var t=e.online,n=t?"Online":"Offline",a=t?"success":"unknown";return u.a.createElement(L.a,{gap:"gap.smaller",vAlign:"center"},u.a.createElement(ee.a,{state:a}),u.a.createElement(M.a,{styles:{margin:"5px"},size:"large"},n))},oe=function(){return u.a.createElement("div",{style:{height:"100%"}},u.a.createElement("h1",null,"Configuration"),u.a.createElement(L.a,{hAlign:"center",vAlign:"center",design:{height:"100%"},column:!0,gap:"gap.large"},u.a.createElement(H.a,{fluid:!0,circular:!0,content:u.a.createElement(B.AddIcon,{size:"largest",circular:!0,color:"brand"}),style:{width:100,height:100,border:"5px solid #0094d8"},color:"brand",as:R.b,to:"/partIdentification"}),u.a.createElement("h2",null,"Configure Task for the Device")))},le=function(){var e=Object(D.i)(),t=e.name,n=e.projectId,a=X().find((function(e){return e.name===t}));if(!a)return u.a.createElement("span",null,"loading...");var r=!!n;return void 0===a?u.a.createElement(D.a,{to:"/cameras"}):u.a.createElement(V.a,{columns:"2",design:{height:"100%"}},u.a.createElement(q,{id:a.id,name:t,rtsp:a.rtsp,modelName:a.model_name}),r?u.a.createElement(ae,null):u.a.createElement(oe,null))},ie=n(240),ue=n(237),se=n(121),de=n(171),me=n(211),pe=n.n(me),ge=n(359),fe=function(e){return{type:"ADD_CAPTURED_IMAGE",payload:{newCapturedImage:e}}},Ee=function(e){return function(){var t=Object(ge.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("/api/images").then((function(e){return e.json()})).then((function(t){var a=t.reduce((function(t,n){return n.part.split("/")[5]===e&&t.push(n),t}),[]);return n({type:"UPDATE_CAPTURED_IMAGES",payload:{capturedImages:a}}),null})).catch((function(e){console.error(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=n(65),be={image:void 0,status:"loading",size:{width:0,height:0}},ve=function(e,t){var n=Object(i.useState)(be),a=Object(G.a)(n,2),r=a[0],c=a[1],o=r.image,l=r.status,u=r.size,s=function(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e}),[e]),t.current}(e);return Object(i.useEffect)((function(){if(e){var n=document.createElement("img");e!==s&&c((function(e){return Object(S.a)({},e,{image:e.image,status:"loading"})}));var a=function(){c({image:n,status:"loaded",size:{width:n.width,height:n.height}})},r=function(){c((function(e){return Object(S.a)({},e,{image:void 0,status:"failed"})}))};return n.addEventListener("load",a),n.addEventListener("error",r),t&&(n.crossOrigin=t),n.src=e,function(){n.removeEventListener("load",a),n.removeEventListener("error",r)}}}),[e,t,s]),[o,l,u]},ye=n(206),Oe=function(e){return{type:"REQUEST_ANNOTATION_SUCCESS",payload:{annotations:e}}},je=function(e,t){return function(n){var a="/api/images/".concat(e,"/");return fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({labels:JSON.stringify(t.map((function(e){return e.label})))})}).then((function(e){return e.json()})).then((function(e){console.log("Save successfully"),n(function(e,t){return{type:"UPDATE_IMAGE_LABEL",payload:{id:e,labels:t}}}(e.id,e.labels))})).catch((function(e){var t;n((t=e,console.error(t),{type:"REQUEST_ANNOTATION_FAILURE"}))}))}},Se={init:function(){return{label:{x1:0,y1:0,x2:0,y2:0},attribute:"",annotationState:r.Empty}},createWithPoint:function(e,t){var n=Object(S.a)({},this.init(),{attribute:t});return this.add(e,n)},add:function(e,t){var n=e.x,a=e.y,c=Object(S.a)({},t);return t.annotationState===r.Empty?(c.label.x1=n,c.label.y1=a,c.label.x2=n,c.label.y2=a,c.annotationState=r.P1Added):t.annotationState===r.P1Added&&(c.label.x2=n,c.label.y2=a,c.annotationState=r.Finish),this.setVerticesToValidValue(c)},setVerticesToInt:function(e){var t=Object(S.a)({},e),n=t.label,a=n.x1,r=n.y1,c=n.x2,o=n.y2;return t.label={x1:Math.round(a),y1:Math.round(r),x2:Math.round(c),y2:Math.round(o)},t},setVerticesPointsOrder:function(e){var t=Object(S.a)({},e),n=t.label,a=n.x1,r=n.y1,c=n.x2,o=n.y2;return a>c&&(t.label.x1=c,t.label.x2=a),r>o&&(t.label.y1=o,t.label.y2=r),t},setVerticesToValidValue:function(e){return this.setVerticesPointsOrder(this.setVerticesToInt(e))}},Ce=function(e){var t=e.display,n=void 0!==t&&t,a=e.scale,r=e.workState,l=e.cursorPosition,s=e.onSelect,d=e.selected,m=e.annotationIndex,p=e.visible,g=void 0===p||p,f=e.annotation,E=e.dispatch,h=e.changeCursorState,b=void 0===h?null:h,v=Object(i.useState)(f.label),y=Object(G.a)(v,2),O=y[0],j=y[1],C=(n?10:5)/a,I=(n?4:2)/a,x=function(){if(!n&&(b(),E)){var e=Object(S.a)({},f);e.label=O,E(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return{type:"UPDATE_ANNOTATION",payload:{index:e,annotation:Se.setVerticesToValidValue(t)}}}(m,e))}},A=function(e){var t=e.xi,a=void 0===t?"x1":t,r=e.yi,o=void 0===r?"y1":r;return function(e){if(!n){var t=Math.round(e.target.position().x),r=Math.round(e.target.position().y);e.target.setAttr("x",t),e.target.setAttr("y",r);var l=["x1","x2"],i=["y1","y2"];l.splice(l.findIndex((function(e){return e===a})),1),i.splice(i.findIndex((function(e){return e===o})),1),O[l[0]]>O[a]?O[i[0]]>O[o]?b(c.nwseResize):b(c.neswResize):O[i[0]]>O[o]?b(c.neswResize):b(c.nwseResize),j((function(e){var n;return Object(S.a)({},e,(n={},Object(ye.a)(n,a,t),Object(ye.a)(n,o,r),n))}))}}};return Object(i.useEffect)((function(){j(f.label)}),[f.label]),Object(i.useEffect)((function(){r===o.Creating&&d&&j((function(e){return Object(S.a)({},e,{x2:l.x,y2:l.y})}))}),[r,d,l,j]),u.a.createElement(he.Group,{visible:g,onMouseDown:function(e){s(m),e.cancelBubble=!0}},u.a.createElement(he.Line,{points:[O.x1,O.y1,O.x2,O.y1,O.x2,O.y2,O.x1,O.y2,O.x1,O.y1],stroke:"red",strokeWidth:I,closed:!0}),u.a.createElement(he.Group,{visible:d},u.a.createElement(he.Circle,{key:"anchor-0",name:"anchor-0",x:O.x1,y:O.y1,radius:C,fill:"red",draggable:!0,onDragMove:A({xi:"x1",yi:"y1"}),onDragEnd:x,onMouseEnter:function(){n||b(c.nwseResize)},onMouseLeave:function(){n||b()}}),u.a.createElement(he.Circle,{key:"anchor-1",name:"anchor-1",x:O.x2,y:O.y1,radius:C,fill:"red",draggable:!0,onDragMove:A({xi:"x2",yi:"y1"}),onDragEnd:x,onMouseEnter:function(){n||b(c.neswResize)},onMouseLeave:function(){n||b()}}),u.a.createElement(he.Circle,{key:"anchor-2",name:"anchor-2",x:O.x2,y:O.y2,radius:C,fill:"red",draggable:!0,onDragMove:A({xi:"x2",yi:"y2"}),onDragEnd:x,onMouseEnter:function(){n||b(c.nwseResize)},onMouseLeave:function(){n||b()}}),u.a.createElement(he.Circle,{key:"anchor-3",name:"anchor-3",x:O.x1,y:O.y2,radius:C,fill:"red",draggable:!0,onDragMove:A({xi:"x1",yi:"y2"}),onDragEnd:x,onMouseEnter:function(){n||b(c.neswResize)},onMouseLeave:function(){n||b()}})))},Ie={width:900,height:600},xe=function(e){var t=e.url,n=void 0===t?"":t,a=e.labelingType,r=e.annotations,s=Object(m.b)(),d=Object(i.useState)(Ie),p=Object(G.a)(d,2),g=p[0],f=p[1],E=Object(i.useMemo)((function(){return a===l.SingleAnnotation&&1===r.length}),[a,r]),h=Object(i.useState)(c.default),b=Object(G.a)(h,2),v=b[0],y=b[1],O=ve(n,"anonymous"),j=Object(G.a)(O,3),C=j[0],I=j[1],x=j[2],A=Object(i.useState)(null),w=Object(G.a)(A,2),T=w[0],k=w[1],P=Object(i.useState)(o.None),_=Object(G.a)(P,2),R=_[0],N=_[1],D=Object(i.useState)({x:0,y:0}),L=Object(G.a)(D,2),U=L[0],z=L[1],F=Object(i.useRef)({x:1,y:1}),V=Object(i.useCallback)((function(e){y(e||(E?c.default:c.crosshair))}),[E]),J=function(e){k(e),N(o.Selecting)};return Object(i.useEffect)((function(){E?(V(),k(0)):V()}),[E,V]),Object(i.useEffect)((function(){R===o.None&&k(null)}),[R]),Object(i.useEffect)((function(){if(0!==x.width){var e=Ie.width/x.width;e!==F.current.x&&(F.current={x:e,y:e},f((function(t){return Object(S.a)({},t,{height:x.height*e})})))}}),[x]),"loading"===I||0===g.height&&0===g.width?u.a.createElement(M.a,{align:"center",color:"red"},"Loading..."):u.a.createElement("div",{style:{margin:3}},u.a.createElement(he.Stage,{width:g.width,height:g.height,scale:F.current,style:{cursor:v}},u.a.createElement(he.Layer,{onMouseDown:function(){var e;E||(null!==T&&R===o.None?k(null):(s((e=U,{type:"CREATE_ANNOTATION",payload:{annotation:Se.createWithPoint(e,"")}})),k(r.length-1),N(o.Creating)))},onMouseUp:function(){var e;R===o.Creating&&(s((e=U,{type:"UPDATE_CREATING_ANNOTATION",payload:{updater:function(t){return Se.add(e,t)}}})),r.length-1===T?N(o.Selecting):(N(o.None),k(null)))},onMouseMove:function(e){z({x:e.evt.offsetX/F.current.x,y:e.evt.offsetY/F.current.y})}},u.a.createElement(he.Image,{image:C}),r.map((function(e,t){return u.a.createElement(Ce,{key:t,workState:R,cursorPosition:U,onSelect:J,annotation:e,scale:F.current.x,annotationIndex:t,selected:t===T,dispatch:s,changeCursorState:V})})))),u.a.createElement(H.a,{disabled:0===r.length,iconOnly:!0,text:!0,styles:{color:0===r.length?"grey":"red",":hover":{color:"red"}},content:u.a.createElement(B.CloseIcon,{size:"large"}),onClick:function(){s(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"REMOVE_ANNOTATION",payload:{index:e}}}(T)),k(null)}}))},Ae=function(e){var t,n,a=e.labelingType,c=e.imageIndex,o=e.closeDialog,l=Object(m.b)(),s=Object(i.useState)(c),d=Object(G.a)(s,2),p=d[0],g=d[1],f=Object(m.c)((function(e){return{images:e.part.capturedImages,annotations:e.labelingPageState.annotations}})),E=f.images,h=f.annotations,b=null===E||void 0===E||null===(t=E[p])||void 0===t?void 0:t.image,v=null===E||void 0===E||null===(n=E[p])||void 0===n?void 0:n.id;return Object(i.useEffect)((function(){return"number"===typeof v&&l(function(e){return function(t,n){var a=n().part.capturedImages.find((function(t){return t.id===e})).labels;if(null===a)t(Oe([]));else{var c=JSON.parse(a).map((function(e){return{label:e,attribute:"",annotationState:r.Finish}}));t(Oe(c))}}}(v)),function(){l({type:"RESET_ANNOTATION"})}}),[l,v]),u.a.createElement(L.a,{column:!0,hAlign:"center"},u.a.createElement(M.a,{size:"larger",weight:"semibold"},"DRAW A RECTANGLE AROUND THE PART"),u.a.createElement(L.a,{vAlign:"center"},u.a.createElement(H.a,{text:!0,disabled:0===p,icon:u.a.createElement(B.ChevronStartIcon,{size:"larger"}),onClick:function(){g((function(e){return(e-1+E.length)%E.length}))}}),u.a.createElement(xe,{url:null!==b&&void 0!==b?b:"/icons/Play.png",annotations:h,labelingType:a}),u.a.createElement(H.a,{text:!0,disabled:p===E.length-1,icon:u.a.createElement(B.ChevronEndIcon,{size:"larger"}),onClick:function(){g((function(e){return(e+1)%E.length}))}})),u.a.createElement(L.a,{gap:"gap.medium"},u.a.createElement(H.a,{primary:!0,content:"Save",onClick:function(){l(je(E[c].id,h)),o()}}),u.a.createElement(H.a,{content:"Cancel",onClick:function(){o()}})))},we=Object(i.memo)((function(e){var t=e.trigger,n=e.imageIndex,a=Object(i.useState)(!1),r=Object(G.a)(a,2),c=r[0],o=r[1];return u.a.createElement(J.a,{trigger:t,styles:{width:"80%"},open:c,onOpen:function(){return o(!0)},content:u.a.createElement(Ae,{closeDialog:function(){return o(!1)},labelingType:l.SingleAnnotation,imageIndex:n})})})),Te=function(e){var t=e.labelImage,n=e.labelText,a=void 0===n?"":n,c=e.width,l=void 0===c?300:c,s=e.height,d=void 0===s?150:s,m=e.pointerCursor,p=void 0!==m&&m,g=e.onClick,f=ve(t.image,"anonymous"),E=Object(G.a)(f,3),h=E[0],b=(E[1],E[2]),v=Object(i.useState)({width:l,height:d}),y=Object(G.a)(v,2),O=y[0],j=y[1],C=Object(i.useRef)({x:1,y:1}),I=Object(i.useMemo)((function(){return(null===t||void 0===t?void 0:t.labels)?JSON.parse(t.labels).map((function(e){return{label:e,attribute:"",annotationState:r.Finish}})):[]}),[t]);return Object(i.useEffect)((function(){if(0!==b.width){var e=O.width/b.width;e!==C.current.x&&(C.current={x:e,y:e},j((function(t){return Object(S.a)({},t,{height:b.height*e})})))}}),[O,b]),u.a.createElement("div",{onClick:g,style:{cursor:p?"pointer":"default"}},u.a.createElement(L.a,{column:!0},u.a.createElement(he.Stage,{width:O.width,height:O.height,scale:C.current},u.a.createElement(he.Layer,null,u.a.createElement(he.Image,{image:h}),I.map((function(e,t){return u.a.createElement(Ce,{key:t,display:!0,workState:o.None,cursorPosition:{x:0,y:0},onSelect:function(){},annotation:e,scale:1,annotationIndex:t,selected:1===I.length,dispatch:null})})))),u.a.createElement(M.a,{align:"center"},a)))},ke=function(){var e=Object(i.useState)(null),t=Object(G.a)(e,2),n=t[0],a=t[1],r=Object(D.i)().partId;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Pe,{setSelectedCamera:a}),u.a.createElement(_e,{selectedCamera:n,partId:r}),u.a.createElement(Re,{partId:r}))},Pe=function(e){var t=e.setSelectedCamera,n=X(),a=n.map((function(e){return{header:e.name,content:{key:e.id}}}));return u.a.createElement(L.a,{gap:"gap.small",vAlign:"center"},u.a.createElement(M.a,null,"Select Camera"),u.a.createElement(de.a,{items:a,onChange:function(e,a){var r=a.value.content.key,c=n.find((function(e){return e.id===r}));c&&t(c)}}),u.a.createElement(R.b,{to:"/addCamera"},"Add Camera"))},_e=function(e){var t=e.selectedCamera,n=e.partId,a=Object(i.useState)(""),r=Object(G.a)(a,2),c=r[0],o=r[1],l=Object(m.b)(),s=Object(i.useCallback)((function(){o(""),fetch("/api/streams/".concat(c,"/disconnect")).then((function(e){return e.json()})).then((function(e){return console.log(e),null})).catch((function(e){console.error(e)}))}),[c]);Object(i.useEffect)((function(){return window.addEventListener("beforeunload",s),function(){window.removeEventListener("beforeunload",s)}}),[s]);var d=c?"http://localhost:8000/api/streams/".concat(c,"/video_feed"):"";return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{width:"100%",height:"600px",backgroundColor:"black"}},d?u.a.createElement(U.a,{src:d,styles:{width:"100%",height:"100%",objectFit:"contain"}}):null),u.a.createElement(H.a.Group,{styles:{alignSelf:"center"},buttons:[{key:"start",icon:u.a.createElement(B.PlayIcon,null),iconOnly:!0,onClick:function(){fetch("/api/streams/connect/?part_id=".concat(n,"&rtsp=").concat(t.rtsp)).then((function(e){return e.json()})).then((function(e){return"ok"===(null===e||void 0===e?void 0:e.status)&&o(e.stream_id),null})).catch((function(e){console.error(e)}))},disabled:null===t},{key:"capture",icon:u.a.createElement(B.CallControlPresentNewIcon,null),iconOnly:!0,onClick:function(){l(function(e){return function(){var t=Object(ge.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("/api/streams/".concat(e,"/capture")).then((function(e){return e.json()})).then((function(e){return"ok"===e.status&&n(fe(e.image)),null})).catch((function(e){console.error(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))},disabled:!c},{key:"stop",icon:u.a.createElement(B.PauseThickIcon,null),iconOnly:!0,onClick:s,disabled:!c}]}))},Re=function(e){var t=e.partId,n=Object(m.b)(),a=Object(m.c)((function(e){return e.part})),r=a.capturedImages,c=a.isValid;return Object(i.useEffect)((function(){n(Ee(t))}),[n,t]),u.a.createElement(u.a.Fragment,null,!c&&u.a.createElement(M.a,{error:!0},"*Please capture and label more then 15 images"),u.a.createElement(L.a,{styles:{overflow:"scroll",border:"1px solid grey",height:"150px",borderColor:c?"":"red"},gap:"gap.small",vAlign:"center"},r.map((function(e,t){return u.a.createElement(we,{key:t,imageIndex:t,trigger:u.a.createElement(Te,{labelImage:e,pointerCursor:!0,width:200,height:150})})}))))},Ne=function(e){var t=e.partId,n=Object(m.b)(),a=Object(m.c)((function(e){return e.part})),r=a.capturedImages,c=a.isValid;return Object(i.useEffect)((function(){n(Ee(t))}),[n,t]),u.a.createElement(u.a.Fragment,null,u.a.createElement("input",{type:"file",onChange:function(e){for(var a=0;a<e.target.files.length;a++){var r=new FormData;r.append("image",e.target.files[a]),r.append("part","http://localhost:8000/api/parts/".concat(t,"/")),fetch("/api/images/",{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){return n(fe(e))})).catch((function(e){return console.error(e)}))}},accept:"image/*",multiple:!0}),u.a.createElement(De,{capturedImages:r,isValid:c}))},De=function(e){var t=e.capturedImages,n=e.isValid;return u.a.createElement(u.a.Fragment,null,!n&&u.a.createElement(M.a,{error:!0},"*Please capture and label more then 15 images"),u.a.createElement(V.a,{columns:"2",styles:{border:"1px solid grey",height:"100%",gridGap:"10px",padding:"10px",borderColor:n?"":"red"}},t.map((function(e,t){return u.a.createElement(we,{key:t,imageIndex:t,trigger:u.a.createElement(Te,{labelImage:e,pointerCursor:!0,width:300,height:150})})}))))},Le=function(){return u.a.createElement(V.a,{columns:"repeat(12, 1fr)",styles:{gridColumnGap:"20px",height:"100%"}},u.a.createElement(Me,null),u.a.createElement(Ue,null))},Me=function(){var e=Object(i.useState)(""),t=Object(G.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(""),c=Object(G.a)(r,2),o=c[0],l=c[1],s=Object(i.useState)(""),d=Object(G.a)(s,2),m=d[0],p=d[1],g=Object(D.i)().partId,f=Object(D.g)();Object(i.useEffect)((function(){g&&K.a.get("/api/parts/".concat(g,"/")).then((function(e){var t=e.data;a(t.name),l(t.description)})).catch((function(e){console.error(e)}))}),[g]);return u.a.createElement(L.a,{column:!0,space:"around",styles:{gridColumn:"1 / span 4"}},u.a.createElement(W.a,{placeholder:"Enter Part Name...",fluid:!0,styles:{fontSize:"2em"},value:n,onChange:function(e,t){a(t.value)}}),u.a.createElement(ie.a,{placeholder:"Enter Description...",design:{height:"80%"},value:o,onChange:function(e,t){l(t.value)}}),u.a.createElement(L.a,{space:"around"},u.a.createElement(H.a,{content:"Save",primary:!0,onClick:function(){var e=void 0!==g,t=e?"/api/parts/".concat(g,"/"):"/api/parts/";K()({method:e?"PUT":"POST",url:t,data:{name:n,description:o}}).then((function(e){var t=e.data;f.push("/parts/detail/".concat(t.id,"/capturePhotos"))})).catch((function(e){p(JSON.stringify(e.response.data))}))},disabled:!n||!o}),u.a.createElement(H.a,{content:"Cancel"})),!!m&&u.a.createElement(ue.a,{danger:!0,content:m,dismissible:!0}))},Ue=function(){var e=Object(D.i)().partId;return u.a.createElement(L.a,{column:!0,gap:"gap.small",styles:{gridColumn:"5 / span 8"}},e?u.a.createElement(ze,{partId:e}):null,u.a.createElement(D.d,null,u.a.createElement(D.b,{path:"/parts/detail/:partId/capturePhotos",component:ke}),u.a.createElement(D.b,{path:"/parts/detail/:partId/uploadPhotos"},u.a.createElement(Ne,{partId:e}))))},ze=function(e){var t=e.partId,n=[{key:"uploadPhotos",as:R.b,to:"/parts/detail/".concat(t,"/uploadPhotos"),content:"Upload Photos"},{key:"capturePhotos",as:R.b,to:"/parts/detail/".concat(t,"/capturePhotos"),content:"Capture Photo"}],a=Object(D.h)().pathname,r=n.findIndex((function(e){return e.to===a}));return u.a.createElement(se.a,{items:n,activeIndex:r,pointing:!0,primary:!0})},Fe=function(e){return console.error(e),{type:"REQUEST_LOCATION_FAILURE"}},Ge=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.locations}));return Object(i.useEffect)((function(){e((function(e){return fetch("/api/locations/").then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"GET_LOCATION_SUCCESS",payload:e}}(t))})).catch((function(t){e(Fe(t))}))}))}),[e]),u.a.createElement(L.a,{column:!0,gap:"gap.large",padding:"padding.medium",styles:{height:"100%"}},u.a.createElement(V.a,{columns:"8",styles:{height:"75%"}},t.map((function(e,t){return u.a.createElement(z,{key:t,to:"/locations/".concat(e.name),defaultSrc:"/icons/defaultLocation.png",width:"100px",height:"100px",label:e.name})}))),u.a.createElement(L.a,{hAlign:"end"},u.a.createElement(R.b,{to:"/locations/register"},u.a.createElement(H.a,{primary:!0,fluid:!0,circular:!0,content:u.a.createElement(B.AddIcon,{size:"largest",circular:!0}),style:{width:"6rem",height:"6rem"}}))))},Ve=n(230),Je=function(){var e=Object(m.b)(),t=Object(D.g)(),n=Object(i.useState)(""),a=Object(G.a)(n,2),r=a[0],c=a[1],o=Object(i.useState)(""),l=Object(G.a)(o,2),s=l[0],d=l[1],p=Object(i.useState)(""),g=Object(G.a)(p,2),f=g[0],E=g[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{size:"larger",weight:"semibold"},"Register Location"),u.a.createElement(Ve.a,{color:"black"}),u.a.createElement(V.a,{columns:"15% 3fr 2fr",styles:{height:"60%"}},u.a.createElement(L.a,{column:!0,gap:"gap.large"},u.a.createElement(z,{defaultSrc:"/icons/defaultLocation.png",width:"100px",height:"100px"}),u.a.createElement(M.a,null,"Coordinates:"),u.a.createElement(M.a,null,"Description:")),u.a.createElement(L.a,{column:!0,gap:"gap.large"},u.a.createElement(W.a,{styles:{paddingTop:"10px",minHeight:"100px"},placeholder:"Location Name",value:r,onChange:function(e,t){return c(t.value)}}),u.a.createElement(W.a,{value:s,onChange:function(e,t){return d(t.value)}}),u.a.createElement(ie.a,{styles:{height:"60%"},value:f,onChange:function(e,t){return E(t.value)}}))),u.a.createElement(L.a,{gap:"gap.medium",padding:"padding.medium"},u.a.createElement(H.a,{primary:!0,disabled:[r,s,f].includes(""),onClick:function(){var n;e((n={name:r,coordinates:s,description:f},function(e){return fetch("/api/locations/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"POST_LOCATION_SUCCESS",payload:e}}(t))})).catch((function(t){e(Fe(t))}))})),t.push("/locations")},content:"Save"}),u.a.createElement(H.a,{content:"Cancel",onClick:function(){t.push("/locations")}})))},He=function(){var e=Object(D.i)().name,t=Object(m.c)((function(t){return t.locations.find((function(t){return t.name===e}))}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{size:"larger",weight:"semibold"},"Details"),u.a.createElement(Ve.a,{color:"black"}),u.a.createElement(V.a,{columns:"15% 3fr 2fr",styles:{height:"60%"}},u.a.createElement(L.a,{column:!0,gap:"gap.large"},u.a.createElement(z,{defaultSrc:"/icons/defaultLocation.png",width:"100px",height:"100px"}),u.a.createElement(M.a,null,"Coordinates:"),u.a.createElement(M.a,null,"Description:")),u.a.createElement(L.a,{column:!0,gap:"gap.large"},u.a.createElement(M.a,{styles:{paddingTop:"10px",minHeight:"100px"}},t.name),u.a.createElement(M.a,null,t.coordinates),u.a.createElement(M.a,{styles:{height:"60%"}},t.description))))},Be=n(493),We=n(241),Qe=n(258),Ke=n(360),Ye=(n(936),n(937),!1),Xe=function(e){var t=e.confidenceLevel,n=e.src,a=Object(i.useState)(null),r=Object(G.a)(a,2),c=r[0],o=r[1];return u.a.createElement(L.a,{hAlign:"center",padding:"padding.medium"},u.a.createElement("div",{style:{margin:"0.2rem"}},u.a.createElement(Te,{labelImage:{image:n,labels:null},width:100,height:100})),u.a.createElement(L.a,{column:!0,gap:"gap.smaller",styles:{width:"30%"}},u.a.createElement(M.a,{truncated:!0},"Confidence Level: ",t,"%"),u.a.createElement(L.a,{column:!0},u.a.createElement(We.a,{checkedValue:c,onCheckedValueChange:function(e,t){return o(t.value)},items:[{key:"1",label:"Yes",value:1},{key:"0",label:"No",value:0}]})),u.a.createElement(we,{imageIndex:1e3,trigger:u.a.createElement(H.a,{primary:!0,content:"Identify",disabled:!c})})))},$e=function(){var e=Object(m.c)((function(e){return e.project})),t=Object(m.c)((function(e){return e.cameras})),n=function(){var e=Object(i.useState)([]),t=Object(G.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){fetch("/api/parts/").then((function(e){return e.json()})).then((function(e){a(e)})).catch((function(e){console.error(e)}))}),[]),n}(),a=Object(i.useMemo)((function(){return 0===n.length||0===e.parts.length?[]:e.parts.map((function(e){var t=n.find((function(t){return t.id===e}));return{header:t.name,content:{key:t.id}}}))}),[n,e]),r=Object(i.useState)(null),c=Object(G.a)(r,2),o=c[0],l=c[1],s=Object(i.useState)([70,90]),d=Object(G.a)(s,2),p=d[0],g=d[1],f=Object(i.useState)(!1),E=Object(G.a)(f,2),h=E[0],b=E[1],v=Object(i.useMemo)((function(){var e=Object(j.a)(new Array(20)).map((function(e,t){return{confidenceLevel:4*t,src:"/icons/Play.png"}})).filter((function(e){return e.confidenceLevel>=p[0]&&e.confidenceLevel<=p[1]}));return Ye&&(h?e.sort((function(e,t){return e.confidenceLevel-t.confidenceLevel})):e.sort((function(e,t){return t.confidenceLevel-e.confidenceLevel}))),e}),[p,h]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{size:"larger",weight:"semibold"},"Manual Identification"),u.a.createElement(Ve.a,{color:"black"}),u.a.createElement(L.a,{column:!0,gap:"gap.medium",space:"between",styles:{height:"75vh",padding:"1em"}},u.a.createElement(V.a,{columns:"3",styles:{columnGap:"1em"}},u.a.createElement(L.a,{vAlign:"center",gap:"gap.smaller"},u.a.createElement(M.a,{truncated:!0},"Select Part:"),u.a.createElement(de.a,{items:a,onChange:function(e,n){var a=n.value.content.key,r=t.find((function(e){return e.id===a}));o&&l(r)}})),u.a.createElement(L.a,{vAlign:"center",gap:"gap.smaller"},u.a.createElement(M.a,null,"Confidence Level:"),u.a.createElement(Ke.b,{value:p,allowCross:!1,onChange:function(e){return g(e)},handle:function(e){var t=e.value,n=e.dragging,a=e.index,r=Object(Be.a)(e,["value","dragging","index"]);return u.a.createElement(Qe.a,{prefixCls:"rc-slider-tooltip",overlay:"".concat(t,"%"),visible:n,placement:"top",key:a},u.a.createElement(Ke.a,Object.assign({value:t},r)))}})),u.a.createElement(L.a,{vAlign:"center"},u.a.createElement(M.a,{truncated:!0},"Sort:"),u.a.createElement(H.a,{icon:h?u.a.createElement(B.ArrowDownIcon,null):u.a.createElement(B.ArrowUpIcon,null),styles:{color:Ye?"#0094d8":"grey"},text:!0,iconOnly:!0,onClick:function(){Ye=!0,b((function(e){return!e}))}}))),u.a.createElement(V.a,{columns:"2",styles:{width:"100%",height:"80%",borderStyle:"solid",overflow:"scroll",borderWidth:"1px"}},v.map((function(e,t){return u.a.createElement(Xe,{key:t,confidenceLevel:e.confidenceLevel,src:e.src})}))),u.a.createElement(H.a,{content:"Update",styles:{width:"15%"},primary:!0,disabled:!0})))},qe=function(){var e=Object(i.useState)([]),t=Object(G.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){fetch("/api/parts").then((function(e){return e.json()})).then((function(e){a(e.map((function(e){return Object(S.a)({},e,{images:[]})})))})).catch((function(e){return console.error(e)}))}),[]),u.a.createElement("div",{style:{position:"relative",height:"100%"}},u.a.createElement(L.a,{gap:"gap.large",wrap:!0},n.map((function(e){return u.a.createElement(Ze,{key:e.id,src:e.images[0],id:e.id,name:e.name})}))),u.a.createElement(H.a,{primary:!0,fluid:!0,circular:!0,content:u.a.createElement(B.AddIcon,{size:"largest",circular:!0}),style:{width:100,height:100,position:"fixed",right:"100px",bottom:"100px"},as:R.b,to:"/parts/detail"}))},Ze=function(e){var t=e.src,n=e.id,a=e.name;return u.a.createElement(L.a,{column:!0,hAlign:"center",gap:"gap.large",as:R.b,to:"/parts/detail/".concat(n,"/capturePhotos")},u.a.createElement("div",{style:{width:"250px",height:"250px"}},u.a.createElement(U.a,{src:t,styles:{width:"100%",height:"100%",objectFit:"cover"}})),u.a.createElement(M.a,{size:"larger"},a))},et=n(170),tt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.project})),n=t.id,a=t.camera,r=t.location,c=t.parts,o=nt("cameras"),l=Object(G.a)(o,4),s=l[0],d=l[1],p=l[2],g=l[3],f=nt("parts",!0),E=Object(G.a)(f,4),h=E[0],b=E[1],v=E[2],y=E[3],O=nt("locations"),j=Object(G.a)(O,4),S=j[0],C=j[1],I=j[2],x=j[3],A=Object(D.g)(),w=Object(i.useState)(!0),T=Object(G.a)(w,2),k=T[0],P=T[1],_=Object(i.useState)(80),N=Object(G.a)(_,2),U=N[0],z=N[1],F=Object(i.useState)(60),V=Object(G.a)(F,2),J=V[0],B=V[1],Q=Object(i.useState)(15),Y=Object(G.a)(Q,2),X=Y[0],$=Y[1],q=Object(i.useState)(!1),Z=Object(G.a)(q,2),ee=Z[0],te=Z[1],ae=Object(i.useRef)(null);Object(i.useEffect)((function(){s||h||S||e(ne())}),[e,s,S,h]),Object(i.useEffect)((function(){ae.current=n,r&&x(r),c.length&&y(c),a&&g(a)}),[a,n,r,c,g,x,y]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{size:"larger",weight:"semibold"},"Part Identification"),u.a.createElement(Ve.a,{color:"black"}),u.a.createElement(L.a,{column:!0,gap:"gap.large",design:{paddingTop:"30px"}},u.a.createElement(at,{moduleName:"cameras",to:"/cameras",value:p,setSelectedModuleItem:g,items:d,isMultiple:!1}),u.a.createElement(at,{moduleName:"parts",to:"/parts",value:v,setSelectedModuleItem:y,items:b,isMultiple:!0}),u.a.createElement(at,{moduleName:"locations",to:"/locations",value:I,setSelectedModuleItem:x,items:C,isMultiple:!1}),u.a.createElement(et.a,{label:"Set up retraining",checked:k,onChange:function(e,t){return P(t.checked)}}),u.a.createElement(M.a,{disabled:!k},"Accuracy Range"),u.a.createElement(M.a,{disabled:!k},"Minimum:"," ",u.a.createElement(W.a,{type:"number",disabled:!k,inline:!0,value:J,onChange:function(e,t){var n=t.value;return B(n)}}),"%"),u.a.createElement(M.a,{disabled:!k},"Maximum:"," ",u.a.createElement(W.a,{type:"number",disabled:!k,inline:!0,value:U,onChange:function(e,t){var n=t.value;return z(n)}}),"%"),u.a.createElement(M.a,{disabled:!k},"Maximum Images:"," ",u.a.createElement(W.a,{type:"number",disabled:!k,inline:!0,value:X,onChange:function(e,t){var n=t.value;te(n<15),$(n)}}),ee&&u.a.createElement(M.a,{error:!0},"Cannot be less than 15")),u.a.createElement(R.b,{to:""},"Advanced Configuration"),u.a.createElement(H.a,{primary:!0,onClick:function(){e(function(e,t,n,a){return function(r){var c=null===e,o=c?"/api/projects/":"/api/projects/".concat(e,"/");return K()(o,{data:{location:"http://localhost:8000/api/locations/".concat(t.id,"/"),parts:n.map((function(e){return"http://localhost:8000/api/parts/".concat(e.id,"/")})),camera:"http://localhost:8000/api/cameras/".concat(a.id,"/"),download_uri:""},method:c?"POST":"PUT",headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data;return r({type:"POST_PROJECT_SUCCESS"}),t.id})).catch((function(e){r({type:"POST_PROJECT_FALIED"}),console.error(e)}))}}(ae.current,I,v,p)).then((function(e){return A.push("/cameras/".concat(p.name,"/").concat(e))})).catch((function(e){return console.log(e)}))},disabled:!p||!I||!v},"Configure")))};function nt(e,t){var n=Object(i.useRef)([]),a=Object(i.useState)([]),r=Object(G.a)(a,2),c=r[0],o=r[1],l=Object(i.useState)(t?[]:null),u=Object(G.a)(l,2),s=u[0],d=u[1],m=Object(i.useState)(!0),p=Object(G.a)(m,2),g=p[0],f=p[1];return Object(i.useEffect)((function(){f(!0),fetch("/api/".concat(e,"/")).then((function(e){return e.json()})).then((function(e){o(e.map((function(e){return{header:e.name,content:{key:e.id}}}))),n.current=e,f(!1)})).catch((function(e){f(!1),console.error(e)}))}),[e]),[g,c,s,Object(i.useCallback)((function(e){if(Array.isArray(e)){var t=e.reduce((function(e,t){var a=n.current.find((function(e){return e.id.toString(10)===t.toString()}));return a&&e.push(a),e}),[]);d(t)}else{var a=n.current.find((function(t){return t.id.toString(10)===e.toString()}));a&&d(a)}}),[])]}var at=function(e){var t=e.moduleName,n=e.to,a=e.value,r=e.setSelectedModuleItem,c=e.items,o=e.isMultiple;return u.a.createElement(L.a,{vAlign:"center",gap:"gap.medium"},u.a.createElement(M.a,{styles:{width:"150px"}},"Select ".concat(t)),u.a.createElement(de.a,{items:c,onChange:function(e,t){if(Array.isArray(t.value)){var n=t.value.map((function(e){return e.content.key}));r(n)}else{var a=t.value.content.key;r(a)}},value:rt(a),multiple:o}),u.a.createElement(R.b,{to:n},"Add ".concat(t)))},rt=function(e){return Array.isArray(e)?e.map((function(e){return{header:e.name,content:{key:e.id}}})):e?{header:e.name,content:{key:e.id}}:null},ct=function(){var e=Object(i.useState)({id:null,key:"",namespace:""}),t=Object(G.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)({success:!1,content:""}),c=Object(G.a)(r,2),o=c[0],l=c[1];Object(i.useEffect)((function(){fetch("/api/settings/").then((function(e){return e.json()})).then((function(e){e.length>0&&a({id:e[0].id,key:e[0].training_key,namespace:e[0].endpoint})})).catch((function(e){console.error(e)}))}),[]);return u.a.createElement(L.a,{column:!0,gap:"gap.large"},u.a.createElement("h1",null,"Setting"),u.a.createElement(Ve.a,{color:"grey"}),u.a.createElement(M.a,{size:"large",weight:"bold"},"Azure Cognitive Services Settings:"," "),u.a.createElement(L.a,{vAlign:"center"},u.a.createElement(M.a,{size:"large",design:{width:"300px"}},"Namespace:"),u.a.createElement(W.a,{value:n.namespace,onChange:function(e,t){var n=t.value;return a((function(e){return Object(S.a)({},e,{namespace:n})}))}})),u.a.createElement(L.a,{vAlign:"center"},u.a.createElement(M.a,{size:"large",design:{width:"300px"}},"Key:"),u.a.createElement(W.a,{value:n.key,onChange:function(e,t){var n=t.value;return a((function(e){return Object(S.a)({},e,{key:n})}))}})),u.a.createElement(L.a,{gap:"gap.large"},u.a.createElement(H.a,{primary:!0,onClick:function(){var e=null===n.id,t=e?"/api/settings/":"/api/settings/".concat(n.id,"/");fetch(t,{body:JSON.stringify({training_key:n.key,endpoint:n.namespace}),method:e?"POST":"PUT",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){l({success:!0,content:"Save Setting Successfully"})})).catch((function(e){l({success:!1,content:"Fail to save settings: /n ".concat(e.toString())})}))}},"Save"),u.a.createElement(H.a,{primary:!0,as:R.b,to:"/"},"Cancel")),o.content?u.a.createElement(ue.a,{success:o.success,danger:!o.success,content:o.content,dismissible:!0}):null)},ot=function(){return u.a.createElement(D.d,null,u.a.createElement(D.b,{path:"/manual",component:$e}),u.a.createElement(D.b,{path:"/locations/register",component:Je}),u.a.createElement(D.b,{path:"/locations/:name",component:He}),u.a.createElement(D.b,{path:"/locations",component:Ge}),u.a.createElement(D.b,{path:"/label/:imageIndex",component:Ae}),u.a.createElement(D.b,{path:"/cameras/:name/:projectId",component:le}),u.a.createElement(D.b,{path:"/cameras/:name/",component:le}),u.a.createElement(D.b,{path:"/cameras",component:$}),u.a.createElement(D.b,{path:"/parts/detail/:partId",component:Le}),u.a.createElement(D.b,{path:"/parts/detail/",component:Le}),u.a.createElement(D.b,{path:"/parts",component:qe}),u.a.createElement(D.b,{path:"/partIdentification",component:tt}),u.a.createElement(D.b,{path:"/setting",component:ct}),u.a.createElement(D.b,{path:"/",component:F}))},lt=n(235),it=function(){var e=Object(D.h)().pathname;if("/"===e)return u.a.createElement(M.a,{color:"black"},"Home");var t=e.split("/").slice(1);return u.a.createElement(L.a,{gap:"gap.smaller"},u.a.createElement(R.b,{to:"/",style:{color:"#0094d8",textDecoration:"none"}},u.a.createElement(M.a,null,"Home")),t.map((function(e,t,n){var a=function(e){switch(e){case"cameras":return"Camera";case"parts":return"Part";case"locations":return"Location";case"register":return"Register";case"label":return"Label";case"manual":return"Identify Manually";case"detail":return"Register Part";case"partIdentification":return"Job Configuration";case"capturePhotos":case"uploadPhotos":return null;default:return"string"===typeof e?"Details":null}}(e);return u.a.createElement(i.Fragment,{key:t},u.a.createElement(M.a,{color:"black"},">"),t===n.length-1?u.a.createElement(M.a,{color:"black"},a):u.a.createElement(R.b,{to:"/".concat(e),style:{color:"#0094d8",textDecoration:"none"}},u.a.createElement(M.a,null,a)))})))},ut=function(e){var t=e.children;return u.a.createElement(V.a,{columns:"60px auto",rows:"50px auto",design:{height:"100vh"},styles:{justifyContent:"stretch"}},u.a.createElement(st,null),u.a.createElement(dt,{styles:{gridColumn:"1 / span 1",gridRow:"2 / span 1",boxShadow:"1px 0px 10px 0px rgba(0,0,0,0.75)",zIndex:1}}),u.a.createElement(lt.a,{styles:{gridColumn:"span 1",padding:"30px"}},u.a.createElement(it,null),t))},st=function(){return u.a.createElement(L.a,{space:"between",vAlign:"center",padding:"padding.medium",styles:{backgroundColor:"#0094d8",gridColumn:"1 / span 2",boxShadow:"0px 1px 10px 0px rgba(0,0,0,0.75)",zIndex:2,fontSize:"20px",padding:"0.5rem 1rem"}},u.a.createElement(L.a,{gap:"gap.large",vAlign:"center"},u.a.createElement(B.MenuIcon,{size:"large",styles:{color:"white"}}),u.a.createElement(R.c,{to:"/",style:{textDecoration:"none"}},u.a.createElement(M.a,{color:"white"},"Vision on Edge"))),u.a.createElement(L.a,{vAlign:"center",hAlign:"end",gap:"gap.medium",styles:{height:"100%"}},u.a.createElement(R.b,{to:"/setting",style:{height:"100%"}},u.a.createElement(U.a,{styles:{height:"100%"},src:"/icons/setting.png"})),u.a.createElement(M.a,{color:"white"},"User")))},dt=function(e){var t=e.styles;return u.a.createElement(lt.a,{color:"grey",inverted:!0,styles:Object(S.a)({},t,{padding:0,paddingTop:"1em"})},u.a.createElement(L.a,{column:!0,gap:"gap.large",hAlign:"center"},u.a.createElement(mt,{src:"/icons/location.png",to:"/locations"}),u.a.createElement(mt,{src:"/icons/camera.png",to:"/cameras"}),u.a.createElement(mt,{src:"/icons/part.png",to:"/parts"}),u.a.createElement(mt,{src:"/icons/manual.png",to:"/manual"}),u.a.createElement(mt,{src:"/icons/partIdentification.png",to:"/partIdentification"})))},mt=function(e){var t=e.src,n=e.to;return u.a.createElement(R.c,{to:n,style:{display:"flex",justifyContent:"center",padding:"0.8em"},activeStyle:{backgroundColor:"rgba(250, 83, 5, 0.5)"}},u.a.createElement(U.a,{src:t,design:{width:"100%"}}))},pt={siteVariables:{colors:{brand:{50:"#f3fafd",100:"#d1ecf9",200:"#aadcf4",300:"#5dbce8",400:"#1ba0dd",500:"#0094d8",600:"#0085c3",700:"#0071a5",800:"#005379",900:"black"}},colorScheme:{brand:{foreground:"#0094d8",background:"#0094d8",border:"#E1DFDD",shadow:"#000",foregroundHover:"#0094d8",backgroundHover:"#0085c3",borderHover:"#5dbce8",shadowHover:"#000",foregroundActive:"#0094d8",backgroundActive:"#0094d8",borderActive:"#E1DFDD",shadowActive:void 0,foregroundFocus:"#0094d8",backgroundFocus:"#0094d8",borderFocus:"#000",shadowFocus:void 0,foregroundPressed:"#0071a5",backgroundPressed:"#0071a5",borderPressed:"#5dbce8",shadowPressed:void 0,foregroundDisabled:"#C8C6C4",backgroundDisabled:"#EDEBE9",borderDisabled:"#EDEBE9",shadowDisabled:void 0,foreground1:"#0094d8",foreground2:"#0085c3",foreground3:"#aadcf4",foreground4:"#fff",background1:"#d1ecf9",background2:"#005379",background3:"#373644",background4:"#0071a5",border1:"#aadcf4",border2:"#5dbce8",foregroundHover1:"#fff",foregroundHover2:"#aadcf4",backgroundHover1:"#f3fafd",foregroundPressed1:"#fff",foregroundActive1:"#0094d8",foregroundActive2:"#aadcf4",backgroundActive1:"#0094d8",borderActive1:"#aadcf4",borderActive2:"#5dbce8",foregroundFocus1:"#0094d8",foregroundFocus2:"#0085c3",foregroundFocus3:"#aadcf4",foregroundFocus4:"#fff",backgroundFocus1:"#d1ecf9",backgroundFocus2:"#005379",backgroundFocus3:"#373644",borderFocusWithin:"#fff",borderFocus1:"#0094d8",foregroundDisabled1:"#C8C6C4",backgroundDisabled1:"#EDEBE9"}}}},gt=Object(B.mergeThemes)(B.themes.teams,pt),ft=function(){return u.a.createElement(N.a,{theme:gt},u.a.createElement(R.a,null,u.a.createElement("div",{className:"App"},u.a.createElement(ut,null,u.a.createElement(ot,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Et=_(y),ht=Et.store,bt=Et.persistor;d.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(m.a,{store:ht},u.a.createElement(p.a,{loading:u.a.createElement("div",null,"Loading.."),persistor:bt},u.a.createElement(ft,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[688,1,2]]]);
//# sourceMappingURL=main.13716184.chunk.js.map