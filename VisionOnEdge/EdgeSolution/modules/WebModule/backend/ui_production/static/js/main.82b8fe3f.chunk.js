(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{688:function(e,t,a){e.exports=a(939)},697:function(e,t,a){},937:function(e,t,a){},939:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,l=a(0),u=a.n(l),s=a(43),d=a.n(s),m=a(21),g=a(467),f=(a(697),a(85)),p=a(468),E=a(469),h=a(259),b=a(470),v=a.n(b),y={dialogIsOpen:!1,cameras:[],locations:[],images:[],labelingPageState:{annotations:[]},part:{capturedImages:[],isValid:!0},project:{isLoading:!1,data:{id:null,camera:null,location:null,parts:[],needRetraining:!0,accuracyRangeMin:60,accuracyRangeMax:80,maxImages:50,modelUrl:"",status:"",successRate:null,successfulInferences:null,unIdetifiedItems:null,prevConsequence:null,curConsequence:null},error:null,trainingStatus:""}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.cameras,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CAMERA_SUCCESS":return t.payload;case"REQUEST_CAMERA_FAILURE":return e;case"POST_CAMERA_SUCCESS":return e.concat(t.payload);case"DELETE_CAMERA_SUCCESS":var a=e.findIndex((function(e){return e.id===t.payload.id}));return-1!==a?e.slice(0,a).concat(e.slice(a+1)):e;default:return e}},C=a(129),S=a(18),j=(n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.part,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CAPTURED_IMAGE":return Object(S.a)({},e,{capturedImages:[].concat(Object(C.a)(e.capturedImages),[t.payload.newCapturedImage])});case"UPDATE_CAPTURED_IMAGES":return Object(S.a)({},e,{capturedImages:t.payload.capturedImages});default:return e}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.part,t=arguments.length>1?arguments[1]:void 0,a=n(e,t),r=a.capturedImages.filter((function(e){return e.labels})).length>=15;return Object(S.a)({},a,{isValid:r})});!function(e){e.Empty="Empty",e.P1Added="P1Added",e.Finish="Finish"}(r||(r={})),function(e){e.default="default",e.pointer="pointer",e.crosshair="crosshair",e.neswResize="nesw-resize",e.nwseResize="nwse-resize"}(c||(c={})),function(e){e.Creating="Creating",e.Selecting="Selecting",e.None="None"}(i||(i={})),function(e){e[e.SingleAnnotation=0]="SingleAnnotation",e[e.MultiAnnotation=1]="MultiAnnotation"}(o||(o={}));var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.labelingPageState,t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case"REQUEST_ANNOTATION_SUCCESS":a.annotations=t.payload.annotations;break;case"REQUEST_ANNOTATION_FAILURE":break;case"CREATE_ANNOTATION":a.annotations.push(t.payload.annotation);break;case"UPDATE_CREATING_ANNOTATION":var n=t.payload.updater(a.annotations[a.annotations.length-1]);n.annotationState===r.Finish&&((0|n.label.x1)===(0|n.label.x2)&&(0|n.label.y1)===(0|n.label.y2)?a.annotations.pop():(a.annotations[a.annotations.length-1]=n,a.annotations=Object(C.a)(a.annotations)));break;case"UPDATE_ANNOTATION":a.annotations[t.payload.index]=t.payload.annotation;break;case"REMOVE_ANNOTATION":a.annotations=a.annotations.slice(0,t.payload.index).concat(a.annotations.slice(t.payload.index+1));break;case"RESET_ANNOTATION":a.annotations=y.labelingPageState.annotations;break;default:return e}return a},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.locations,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOCATION_SUCCESS":return t.payload;case"REQUEST_LOCATION_FAILURE":return e;case"POST_LOCATION_SUCCESS":return e.concat(t.payload);default:return e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.dialogIsOpen,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_DIALOG":return!0;case"CLOSE_DIALOG":return!1;default:return e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.project,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROJECT_REQUEST":return Object(S.a)({},e,{isLoading:!0,error:null});case"GET_PROJECT_SUCCESS":return Object(S.a)({},e,{isLoading:!1,data:Object(S.a)({},t.payload.project),error:null});case"GET_PROJECT_FAILED":return Object(S.a)({},e,{isLoading:!1,error:t.error});case"POST_PROJECT_REQUEST":return Object(S.a)({},e,{isLoading:!0});case"POST_PROJECT_SUCCESS":return Object(S.a)({},e,{isLoading:!1});case"POST_PROJECT_FALIED":return Object(S.a)({},e,{isLoading:!1,error:t.error});case"DELETE_PROJECT_SUCCESS":return Object(S.a)({},e,{isLoading:!1,data:{id:null,camera:null,location:null,parts:[],needRetraining:!0,accuracyRangeMin:60,accuracyRangeMax:80,maxImages:50,modelUrl:"",status:"",successRate:null,successfulInferences:null,unIdetifiedItems:null,curConsequence:null,prevConsequence:null},error:null});case"DELETE_PROJECT_FALIED":return Object(S.a)({},e);case"UPDATE_PROJECT_DATA":return Object(S.a)({},e,{data:t.payload});case"GET_TRAINING_STATUS_REQUEST":return Object(S.a)({},e);case"GET_TRAINING_STATUS_SUCCESS":var a=t.payload,n=a.successRate,r=a.modelUrl,c=a.successfulInferences,i=a.unIdetifiedItems,o=a.consequences;return Object(S.a)({},e,{trainingStatus:t.payload.trainingStatus,data:Object(S.a)({},e.data,{},n&&{successRate:n},{},r&&{modelUrl:r},{},c&&{successfulInferences:c},{},i&&{unIdetifiedItems:i},{},o[0]&&{curConsequence:o[0]},{},o[1]&&{curConsequence:o[1]})});case"GET_TRAINING_STATUS_FAILED":return Object(S.a)({},e,{trainingStatus:"",data:Object(S.a)({},e.data,{status:"offline"}),error:t.error});default:return Object(S.a)({},e)}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.images,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LABEL_IMAGE_SUCCESS":return t.payload;case"REQUEST_LABEL_IMAGE_FAILURE":return e;case"POST_LABEL_IMAGE_SUCCESS":return e.concat(t.payload);case"DELETE_LABEL_IMAGE_SUCCESS":var a=e.findIndex((function(e){return e.id===t.payload.id}));return-1!==a?e.slice(0,a).concat(e.slice(a+1)):e;case"UPDATE_LABEL_IMAGE_ANNOTATION":var n=Object(C.a)(e),r=n.findIndex((function(e){return e.id===t.payload.id}));return n[r]=Object(S.a)({},n[r],{labels:t.payload.labels}),n;default:return e}},_=Object(f.combineReducers)({cameras:O,locations:x,part:j,labelingPageState:I,dialogIsOpen:A,project:T,images:w}),R={key:"root",storage:v.a},k=Object(h.a)(R,_),P=function(e){var t=[p.a],a=f.applyMiddleware.apply(void 0,t),n=Object(E.composeWithDevTools)(a),r=Object(f.createStore)(k,e,n);return{store:r,persistor:Object(h.b)(r)}},L=a(31),N=a(236),D=a(131),M=a(162),U=a(79),z=a(84),F=function(e){var t=e.to,a=void 0===t?"":t,n=e.imgSrc,r=e.defaultSrc,c=e.bgImgSrc,i=e.label,o=void 0===i?"":i,l=e.imgPadding,s=void 0===l?"10px":l,d=e.width,m=void 0===d?"100px":d,g=e.height,f=void 0===g?"100px":g,p=e.bgImgStyle,E=e.pointerCursor,h=void 0!==E&&E,b=e.onClick;return u.a.createElement(M.a,{column:!0,styles:{width:m}},""===a?u.a.createElement("div",{style:{height:f},onClick:b},u.a.createElement(z.a,{src:null!==n&&void 0!==n?n:r,styles:Object(S.a)({padding:s,height:"100%",objectFit:"contain",backgroundImage:"url(".concat(c,")"),cursor:h?"pointer":"default"},p)})):u.a.createElement(L.b,{to:a},u.a.createElement("div",{style:{height:f},onClick:b},u.a.createElement(z.a,{src:null!==n&&void 0!==n?n:r,styles:Object(S.a)({padding:s,height:"100%",objectFit:"contain",backgroundImage:"url(".concat(c,")")},p)}))),u.a.createElement(U.a,{align:"center"},o))},G=function(){var e=Object(m.b)();return u.a.createElement(M.a,{column:!0,gap:"gap.medium"},u.a.createElement(U.a,{size:"larger",weight:"semibold"},"Hello User!"),u.a.createElement(U.a,null),u.a.createElement(U.a,{color:"white",styles:{backgroundColor:"#373644",padding:"2px 2px 2px 10px"}},"GET STARTED:"),u.a.createElement(M.a,{gap:"gap.large"},u.a.createElement(F,{imgSrc:"/icons/location-filled.png",to:"/locations/register",label:"Register a new Location",width:"100px"}),u.a.createElement(F,{imgSrc:"/icons/camera-filled.png",to:"/cameras",label:"Register a new Camera",width:"100px",imgPadding:"10px 3px 10px 3px",onClick:function(){e({type:"OPEN_DIALOG"})}}),u.a.createElement(F,{imgSrc:"/icons/part-filled.png",to:"/parts/detail",label:"Register a new Part",width:"100px"})),u.a.createElement(U.a,{color:"white",styles:{backgroundColor:"#373644",padding:"2px 2px 2px 10px"}},"SELECT FROM THE FOLLOWING TASKS:"),u.a.createElement(M.a,{gap:"gap.large"},u.a.createElement(F,{imgSrc:"/icons/doubleCube.png",to:"/partIdentification",label:"Identify Parts",width:"100px"}),u.a.createElement(F,{imgSrc:"/icons/defects.png",to:"/",label:"Identify Defects",width:"100px"}),u.a.createElement(F,{imgSrc:"/icons/manual-filled.png",to:"/manual",label:"Identify items manually",width:"100px"})))},J=a(17),B=a(228),V=a(238),H=a(68),q=a(23),Q=a(177),W=a(40),Y=a.n(W),X=function(e){return console.error(e),{type:"REQUEST_CAMERA_FAILURE"}},K=function(){return function(e){return Y()("/api/cameras/").then((function(t){var a=t.data;e(function(e){return{type:"GET_CAMERA_SUCCESS",payload:e}}(a))})).catch((function(t){e(X(t))}))}},$=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return{dialogIsOpen:e.dialogIsOpen,cameras:e.cameras}})),a=t.dialogIsOpen,n=t.cameras,r=Object(l.useState)(""),c=Object(J.a)(r,2),i=c[0],o=c[1],s=Object(l.useState)(""),d=Object(J.a)(s,2),g=d[0],f=d[1],p=Object(l.useState)(""),E=Object(J.a)(p,2),h=E[0],b=E[1];return Object(l.useEffect)((function(){e(K())}),[e]),u.a.createElement(M.a,{column:!0,gap:"gap.large",padding:"padding.medium",styles:{height:"100%"}},u.a.createElement(B.a,{columns:"8",styles:{height:"75%"}},n.map((function(e,t){return u.a.createElement(F,{key:t,to:"/cameras/detail?name=".concat(e.name),defaultSrc:"/icons/Play.png",bgImgSrc:"/icons/defaultCamera.png",width:"100px",height:"100px",bgImgStyle:{backgroundSize:"60%",backgroundPosition:"center",backgroundRepeat:"no-repeat"},label:e.name})}))),u.a.createElement(V.a,{trigger:u.a.createElement(M.a,{hAlign:"end"},u.a.createElement(H.a,{primary:!0,fluid:!0,circular:!0,content:u.a.createElement(q.AddIcon,{size:"largest",circular:!0}),style:{width:"6em",height:"6em"}})),confirmButton:"Submit",onConfirm:function(){var t;e((t={name:i,rtsp:g,model_name:h},function(e){return Y()("/api/cameras/",{method:"POST",data:t}).then((function(t){var a=t.data;e(function(e){return{type:"POST_CAMERA_SUCCESS",payload:e}}(a))})).catch((function(t){e(X(t))}))})),o(""),f(""),b(""),e({type:"CLOSE_DIALOG"})},cancelButton:"Cancel",header:"Add Camera",open:a,onOpen:function(){e({type:"OPEN_DIALOG"})},onCancel:function(){e({type:"CLOSE_DIALOG"})},content:u.a.createElement(M.a,{column:!0,gap:"gap.small"},u.a.createElement(Q.a,{placeholder:"Name",value:i,onChange:function(e,t){return o(t.value)}}),u.a.createElement(Q.a,{placeholder:"RTSP URL",value:g,onChange:function(e,t){return f(t.value)}}),u.a.createElement(Q.a,{placeholder:"Model Name",value:h,onChange:function(e,t){return b(t.value)}}))}))},Z=function(e){var t=e.trigger,a=e.onConfirm,n=e.primaryStyles,r=e.content,c=Object(l.useState)(!1),i=Object(J.a)(c,2),o=i[0],s=i[1];return u.a.createElement(V.a,{trigger:t,styles:{width:"20em",padding:"0.5em"},open:o,onOpen:function(){return s(!0)},footer:u.a.createElement(M.a,{column:!0,gap:"gap.large"},u.a.createElement(U.a,{size:"large",align:"center"},r),u.a.createElement(M.a,{space:"around"},u.a.createElement(H.a,{primary:!0,content:"Confirm",styles:n,onClick:a}),u.a.createElement(H.a,{content:"Cancel",onClick:function(){return s(!1)}})))})},ee=Object(l.memo)((function(e){var t=e.id,a=e.name,n=e.rtsp,r=e.modelName,c=Object(m.b)();return u.a.createElement(M.a,{styles:{padding:"1em 2em"},column:!0,space:"between"},u.a.createElement(B.a,{columns:"2",styles:{gap:"3em"}},u.a.createElement(U.a,{size:"larger",weight:"semibold"},"Details"),u.a.createElement(F,{defaultSrc:"/icons/defaultCamera.png",width:"100px",height:"100px"}),u.a.createElement(M.a,{column:!0,gap:"gap.small"},u.a.createElement(U.a,{size:"large",content:"Name:"}),u.a.createElement(U.a,{size:"large",content:"RTSP Url:"}),u.a.createElement(U.a,{size:"large",content:"Model:"})),u.a.createElement(M.a,{column:!0,gap:"gap.medium"},u.a.createElement(U.a,{size:"large",content:a}),u.a.createElement(U.a,{size:"large",content:n}),u.a.createElement(U.a,{size:"large",content:r}))),u.a.createElement(Z,{trigger:u.a.createElement(H.a,{primary:!0,content:"Delete Camera",styles:{backgroundColor:"#C4314B",":hover":{backgroundColor:"#A72037"},":active":{backgroundColor:"#8E192E"}}}),content:"Delete Camera",primaryStyles:{backgroundColor:"#C4314B",":hover":{backgroundColor:"#A72037"},":active":{backgroundColor:"#8E192E"}},onConfirm:function(){c(function(e){return function(t){return Y()("/api/cameras/".concat(e,"/"),{method:"DELETE"}).then((function(){t(function(e){return{type:"DELETE_CAMERA_SUCCESS",payload:{id:e}}}(e))})).catch((function(e){t(X(e))}))}}(t))}}))})),te=a(237),ae=a(106),ne=a(239),re=function(e,t,a,n,r,c){return{type:"GET_TRAINING_STATUS_SUCCESS",payload:{trainingStatus:e,modelUrl:t,successRate:a,successfulInferences:n,unIdetifiedItems:r,consequences:c}}},ce=function(){return function(e){return e({type:"GET_PROJECT_REQUEST"}),Y.a.get("/api/projects/").then((function(t){var a,n,r,c,i,o,l,u,s,d,m,g,f,p,E,h,b,v,y,O,C,S,j,I,x,A,T=t.data,w={id:null!==(a=null===(n=T[0])||void 0===n?void 0:n.id)&&void 0!==a?a:null,camera:null!==(r=parseInt(null===(c=T[0])||void 0===c?void 0:c.camera.split("/")[5],10))&&void 0!==r?r:null,location:null!==(i=parseInt(null===(o=T[0])||void 0===o?void 0:o.location.split("/")[5],10))&&void 0!==i?i:null,parts:null!==(l=null===(u=T[0])||void 0===u?void 0:u.parts.map((function(e){return parseInt(e.split("/")[5],10)})))&&void 0!==l?l:[],modelUrl:null!==(s=null===(d=T[0])||void 0===d?void 0:d.download_uri)&&void 0!==s?s:"",status:null!==(m=null===(g=T[0])||void 0===g?void 0:g.status)&&void 0!==m?m:"online",needRetraining:null===(f=null===(p=T[0])||void 0===p?void 0:p.needRetraining)||void 0===f||f,accuracyRangeMin:null!==(E=null===(h=T[0])||void 0===h?void 0:h.accuracyRangeMin)&&void 0!==E?E:60,accuracyRangeMax:null!==(b=null===(v=T[0])||void 0===v?void 0:v.accuracyRangeMax)&&void 0!==b?b:80,maxImages:null!==(y=null===(O=T[0])||void 0===O?void 0:O.maxImages)&&void 0!==y?y:50,successRate:null!==(C=null===(S=T[0])||void 0===S?void 0:S.successRate)&&void 0!==C?C:0,successfulInferences:null!==(j=null===(I=T[0])||void 0===I?void 0:I.successfulInferences)&&void 0!==j?j:0,unIdetifiedItems:null!==(x=null===(A=T[0])||void 0===A?void 0:A.unIdetifiedItems)&&void 0!==x?x:0};e(function(e){return{type:"GET_PROJECT_SUCCESS",payload:{project:e}}}(w))})).catch((function(t){e({type:"GET_PROJECT_FAILED",error:t})}))}},ie=function(e){return function(t){return t({type:"GET_TRAINING_STATUS_REQUEST"}),Y.a.get("/api/projects/".concat(e,"/export")).then((function(e){var a=e.data;if("failed"===a.status)throw new Error(a.log);if("ok"===a.status){var n=a.performance.per_tag_performance.map((function(e){return{precision:e.precision,recall:e.recall,mAP:e.average_precision}}));t(re("",a.download_uri,a.success_rate,a.inference_num,a.unidentified_num,n))}else t(re(a.log))})).catch((function(e){return t({type:"GET_TRAINING_STATUS_FAILED",error:e})}))}},oe=function(e){Y.a.get("/api/projects/".concat(e,"/train")).catch((function(e){return console.error(e)}))},le=a(211),ue=a.n(le),se=a(359),de=function(e){return console.error(e),{type:"REQUEST_LABEL_IMAGE_FAILURE"}},me=function(){return function(e){return Y()("/api/images/").then((function(t){var a=t.data;e(function(e){return{type:"GET_LABEL_IMAGE_SUCCESS",payload:e}}(a))})).catch((function(t){e(de(t))}))}},ge=function(e){return function(t){return Y()("/api/images/",{method:"POST",data:e}).then((function(e){var a=e.data;t({type:"POST_LABEL_IMAGE_SUCCESS",payload:a})})).catch((function(e){t(de(e))}))}},fe=function(e,t){return function(a){var n="/api/images/".concat(e,"/");return Y()({url:n,method:"PATCH",data:{labels:JSON.stringify(t.map((function(e){return e.label})))}}).then((function(e){var t=e.data;console.info("Save successfully"),a(pe(t.id,t.labels))})).catch((function(e){a(de(e))}))}},pe=function(e,t){return{type:"UPDATE_LABEL_IMAGE_ANNOTATION",payload:{id:e,labels:t}}},Ee=function(e){var t=e.selectedCamera,a=e.partId,n=e.canCapture,r=Object(l.useState)(""),c=Object(J.a)(r,2),i=c[0],o=c[1],s=Object(m.b)(),d=Object(l.useCallback)((function(){o(""),fetch("/api/streams/".concat(i,"/disconnect")).then((function(e){return e.json()})).then((function(e){return console.log(e),null})).catch((function(e){console.error(e)}))}),[i]);Object(l.useEffect)((function(){return window.addEventListener("beforeunload",d),function(){window.removeEventListener("beforeunload",d)}}),[d]);var g=i?"/api/streams/".concat(i,"/video_feed"):"";return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{width:"100%",height:"600px",backgroundColor:"black"}},g?u.a.createElement(z.a,{src:g,styles:{width:"100%",height:"100%",objectFit:"contain"}}):null),u.a.createElement(H.a.Group,{styles:{alignSelf:"center"},buttons:[{key:"start",icon:u.a.createElement(q.PlayIcon,null),iconOnly:!0,onClick:function(){var e="/api/streams/connect/?part_id=".concat(a,"&rtsp=").concat(t.rtsp);n||(e+="&inference=1"),fetch(e).then((function(e){return e.json()})).then((function(e){return"ok"===(null===e||void 0===e?void 0:e.status)&&o(e.stream_id),null})).catch((function(e){console.error(e)}))},disabled:null===t},n&&{key:"capture",icon:u.a.createElement(q.CallControlPresentNewIcon,null),iconOnly:!0,onClick:function(){s(function(e){return function(){var t=Object(se.a)(ue.a.mark((function t(a){return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("/api/streams/".concat(e,"/capture")).then((function(e){return e.json()})).then((function(e){return"ok"===e.status&&(a({type:"ADD_CAPTURED_IMAGE",payload:{newCapturedImage:e.image}}),a(me())),null})).catch((function(e){console.error(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i))},disabled:!i},{key:"stop",icon:u.a.createElement(q.PauseThickIcon,null),iconOnly:!0,onClick:d,disabled:!i}]}))},he=function(){var e=Object(l.useState)([]),t=Object(J.a)(e,2),a=t[0],n=t[1];return Object(l.useEffect)((function(){fetch("/api/parts/").then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){console.error(e)}))}),[]),a},be=function(){return new URLSearchParams(Object(D.i)().search)},ve=function(e){var t,a,n,r,c,i,o=e.camera,s=e.projectId,d=Object(m.c)((function(e){return e.project})),g=d.error,f=d.data,p=d.trainingStatus,E=Object(l.useState)(p),h=Object(J.a)(E,2),b=h[0],v=h[1],y=he(),O=Object(m.b)(),C=be().get("name"),S=Object(D.h)();return Object(l.useEffect)((function(){O(ie(s))}),[O,s]),function(e,t){var a=Object(l.useRef)(null);Object(l.useEffect)((function(){a.current=e}),[e]),Object(l.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){O(ie(s))}),5e3),Object(l.useEffect)((function(){O(ce())}),[O]),Object(l.useEffect)((function(){v((function(e){return"".concat(e,"\n").concat(p)}))}),[p]),u.a.createElement(M.a,{column:!0,gap:"gap.large"},u.a.createElement("h1",null,"Configuration"),g&&u.a.createElement(te.a,{danger:!0,header:g.name,content:"".concat(g.message)}),p?u.a.createElement(u.a.Fragment,null,u.a.createElement(ae.a,{size:"smallest"}),u.a.createElement("pre",null,b)):u.a.createElement(u.a.Fragment,null,u.a.createElement(Oe,{title:"Status",content:u.a.createElement(Ce,{online:"online"===f.status})}),u.a.createElement(Oe,{title:"Configured for",content:y.filter((function(e){return f.parts.includes(e.id)})).map((function(e){return e.name})).join(", ")}),u.a.createElement(M.a,{column:!0,gap:"gap.small"},u.a.createElement(U.a,{styles:{width:"150px"},size:"large"},"Live View:"),u.a.createElement(Ee,{selectedCamera:o,partId:f.parts[0],canCapture:!1})),u.a.createElement(Oe,{title:"Success Rate",content:u.a.createElement(U.a,{styles:{color:"rgb(244, 152, 40)",fontWeight:"bold"},size:"large"},"".concat(f.successRate,"%"))}),u.a.createElement(Oe,{title:"Successful Inferences",content:f.successfulInferences}),u.a.createElement(Oe,{title:"Unidentified Items",content:u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{styles:{margin:"5px"},size:"large"},f.unIdetifiedItems),u.a.createElement(H.a,{content:"Identify Manually",primary:!0,styles:{backgroundColor:"red",marginLeft:"100px",":hover":{backgroundColor:"#A72037"},":active":{backgroundColor:"#8E192E"}},as:L.b,to:"/manual"}))}),f.prevConsequence&&u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,null,"Previous Model Metrics"),u.a.createElement(ye,{precision:null===(t=f.prevConsequence)||void 0===t?void 0:t.precision,recall:null===(a=f.prevConsequence)||void 0===a?void 0:a.recall,mAP:null===(n=f.prevConsequence)||void 0===n?void 0:n.mAP})),u.a.createElement(U.a,null,"Updated Model Metrics"),u.a.createElement(ye,{precision:null===(r=f.curConsequence)||void 0===r?void 0:r.precision,recall:null===(c=f.curConsequence)||void 0===c?void 0:c.recall,mAP:null===(i=f.curConsequence)||void 0===i?void 0:i.mAP}),u.a.createElement(H.a,{primary:!0,onClick:function(){confirm("Delete this configuration?")&&O(function(e){return function(t){return Y.a.delete("/api/projects/".concat(e,"/")).then((function(){return t({type:"DELETE_PROJECT_SUCCESS"})})).catch((function(e){alert(e),t({type:"DELETE_PROJECT_FALIED"})}))}}(s)).then((function(e){if(e)return S.push("/cameras/detail?name=".concat(C))})).catch((function(e){return console.error(e)}))}},"Delete Configuration"),u.a.createElement(H.a,{primary:!0,as:L.b,to:"/partIdentification"},"Edit Configuration")))},ye=function(e){var t=e.precision,a=e.recall,n=e.mAP;return u.a.createElement(B.a,{columns:3},u.a.createElement("div",{style:{height:"5em",display:"flex",flexFlow:"column",justifyContent:"space-between"}},u.a.createElement(U.a,{align:"center",size:"large",weight:"semibold"},"Precison"),u.a.createElement(U.a,{align:"center",size:"large",weight:"semibold",styles:{color:"#9a0089"}},t,"%")),u.a.createElement("div",{style:{height:"5em",display:"flex",flexFlow:"column",justifyContent:"space-between"}},u.a.createElement(U.a,{align:"center",size:"large",weight:"semibold"},"Recall"),u.a.createElement(U.a,{align:"center",size:"large",weight:"semibold",styles:{color:"#0063b1"}},a,"%")),u.a.createElement("div",{style:{height:"5em",display:"flex",flexFlow:"column",justifyContent:"space-between"}},u.a.createElement(U.a,{align:"center",size:"large",weight:"semibold"},"mAP"),u.a.createElement(U.a,{align:"center",size:"large",weight:"semibold",styles:{color:"#69c138"}},n,"%")))},Oe=function(e){var t=e.title,a=e.content;return u.a.createElement(M.a,{vAlign:"center"},u.a.createElement(U.a,{styles:{width:"200px"},size:"large"},"".concat(t,": ")),"string"===typeof a||"number"===typeof a?u.a.createElement(U.a,{size:"large"},a):a)},Ce=function(e){var t=e.online,a=t?"Online":"Offline",n=t?"success":"unknown";return u.a.createElement(M.a,{gap:"gap.smaller",vAlign:"center"},u.a.createElement(ne.a,{state:n}),u.a.createElement(U.a,{styles:{margin:"5px"},size:"large"},a))},Se=function(){return u.a.createElement("div",{style:{height:"100%"}},u.a.createElement("h1",null,"Configuration"),u.a.createElement(M.a,{hAlign:"center",vAlign:"center",design:{height:"100%"},column:!0,gap:"gap.large"},u.a.createElement(H.a,{fluid:!0,circular:!0,content:u.a.createElement(q.AddIcon,{size:"largest",circular:!0,color:"brand"}),style:{width:100,height:100,border:"5px solid #0094d8"},color:"brand",as:L.b,to:"/partIdentification"}),u.a.createElement("h2",null,"Configure Task for the Device")))},je=function(){var e=Object(m.b)(),t=be().get("name"),a=Object(m.c)((function(e){return{project:e.project,camera:e.cameras.find((function(e){return e.name===t}))}})),n=a.project,r=a.camera;if(Object(l.useEffect)((function(){e(ce()),e(K())}),[e]),!r)return u.a.createElement(D.b,{to:"/cameras"});var c=n.data.camera===r.id;return u.a.createElement(B.a,{columns:"2",design:{height:"100%"}},u.a.createElement(ee,{id:r.id,name:t,rtsp:r.rtsp,modelName:r.model_name}),c?u.a.createElement(ve,{camera:r,projectId:n.data.id}):u.a.createElement(Se,null))},Ie=a(240),xe=a(121),Ae=a(173),Te=a(42),we={image:void 0,status:"loading",size:{width:0,height:0}},_e=function(e,t){var a=Object(l.useState)(we),n=Object(J.a)(a,2),r=n[0],c=n[1],i=r.image,o=r.status,u=r.size,s=function(e){var t=Object(l.useRef)();return Object(l.useEffect)((function(){t.current=e}),[e]),t.current}(e);return Object(l.useEffect)((function(){if(e){var a=document.createElement("img");e!==s&&c((function(e){return Object(S.a)({},e,{image:e.image,status:"loading"})}));var n=function(){c({image:a,status:"loaded",size:{width:a.width,height:a.height}})},r=function(){c((function(e){return Object(S.a)({},e,{image:void 0,status:"failed"})}))};return a.addEventListener("load",n),a.addEventListener("error",r),t&&(a.crossOrigin=t),a.src=e,function(){a.removeEventListener("load",n),a.removeEventListener("error",r)}}}),[e,t,s]),[i,o,u]},Re=function(e){return function(t){if(0!==t.width){if(t.width>t.height){var a=e.width/t.width;return[{width:e.width,height:t.height*a},a]}var n=e.height/t.height;return[{height:e.height,width:t.width*n},n]}return[e,1]}},ke=a(146),Pe=function(e){return{type:"REQUEST_ANNOTATION_SUCCESS",payload:{annotations:e}}},Le={init:function(){return{label:{x1:0,y1:0,x2:0,y2:0},attribute:"",annotationState:r.Empty}},createWithPoint:function(e,t){var a=Object(S.a)({},this.init(),{attribute:t});return this.add(e,a)},add:function(e,t){var a=e.x,n=e.y,c=Object(S.a)({},t);return t.annotationState===r.Empty?(c.label.x1=a,c.label.y1=n,c.label.x2=a,c.label.y2=n,c.annotationState=r.P1Added):t.annotationState===r.P1Added&&(c.label.x2=a,c.label.y2=n,c.annotationState=r.Finish),this.setVerticesToValidValue(c)},setVerticesToInt:function(e){var t=Object(S.a)({},e),a=t.label,n=a.x1,r=a.y1,c=a.x2,i=a.y2;return t.label={x1:Math.round(n),y1:Math.round(r),x2:Math.round(c),y2:Math.round(i)},t},setVerticesPointsOrder:function(e){var t=Object(S.a)({},e),a=t.label,n=a.x1,r=a.y1,c=a.x2,i=a.y2;return n>c&&(t.label.x1=c,t.label.x2=n),r>i&&(t.label.y1=i,t.label.y2=r),t},setVerticesToValidValue:function(e){return this.setVerticesPointsOrder(this.setVerticesToInt(e))}},Ne=function(e){var t=e.scale,a=e.workState,n=e.onSelect,r=e.selected,o=e.annotationIndex,s=e.visible,d=void 0===s||s,m=e.annotation,g=e.dispatch,f=e.changeCursorState,p=void 0===f?null:f,E=Object(l.useState)(m.label),h=Object(J.a)(E,2),b=h[0],v=h[1],y=5/t,O=2/t,C=Object(l.useRef)(null),j=function(){if(p(),g){var e=Object(S.a)({},m);e.label=b,g(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return{type:"UPDATE_ANNOTATION",payload:{index:e,annotation:Le.setVerticesToValidValue(t)}}}(o,e))}},I=Object(l.useCallback)((function(e){a===i.Creating&&r&&v((function(a){return Object(S.a)({},a,{x2:e.evt.offsetX/t,y2:e.evt.offsetY/t})}))}),[a,v,r,t]),x=Object(l.useCallback)((function(e){var a=e.xi,n=void 0===a?"x1":a,r=e.yi,i=void 0===r?"y1":r;return function(e){var a=e.target.getStage().getSize(),r=a.width,o=a.height,l=Math.round(e.target.position().x),u=Math.round(e.target.position().y);l<0&&(l=0),u<0&&(u=0),l>r/t&&(l=r/t),u>o/t&&(u=o/t),e.target.setAttr("x",l),e.target.setAttr("y",u);var s=["x1","x2"],d=["y1","y2"];s.splice(s.findIndex((function(e){return e===n})),1),d.splice(d.findIndex((function(e){return e===i})),1),b[s[0]]>b[n]?b[d[0]]>b[i]?p(c.nwseResize):p(c.neswResize):b[d[0]]>b[i]?p(c.neswResize):p(c.nwseResize),v((function(e){var t;return Object(S.a)({},e,(t={},Object(ke.a)(t,n,l),Object(ke.a)(t,i,u),t))}))}}),[p,t,b]);return Object(l.useEffect)((function(){var e=C.current.getLayer();return e.on("mousemove",I),function(){e.off("mousemove",I)}}),[I]),Object(l.useEffect)((function(){v(m.label)}),[m.label]),u.a.createElement(Te.Group,{ref:function(e){e&&(C.current=e)},visible:d,onMouseDown:function(e){a===i.None&&(n(o),e.cancelBubble=!0)}},u.a.createElement(Te.Line,{points:[b.x1,b.y1,b.x2,b.y1,b.x2,b.y2,b.x1,b.y2,b.x1,b.y1],stroke:"red",strokeWidth:O,closed:!0}),u.a.createElement(Te.Group,{visible:r},u.a.createElement(Te.Circle,{key:"anchor-0",name:"anchor-0",x:b.x1,y:b.y1,radius:y,fill:"red",draggable:!0,onDragMove:x({xi:"x1",yi:"y1"}),onDragEnd:j,onMouseEnter:function(){a!==i.Creating&&p(c.nwseResize)},onMouseLeave:function(){p()}}),u.a.createElement(Te.Circle,{key:"anchor-1",name:"anchor-1",x:b.x2,y:b.y1,radius:y,fill:"red",draggable:!0,onDragMove:x({xi:"x2",yi:"y1"}),onDragEnd:j,onMouseEnter:function(){a!==i.Creating&&p(c.neswResize)},onMouseLeave:function(){p()}}),u.a.createElement(Te.Circle,{key:"anchor-2",name:"anchor-2",x:b.x2,y:b.y2,radius:y,fill:"red",draggable:!0,onDragMove:x({xi:"x2",yi:"y2"}),onDragEnd:j,onMouseEnter:function(){a!==i.Creating&&p(c.nwseResize)},onMouseLeave:function(){p()}}),u.a.createElement(Te.Circle,{key:"anchor-3",name:"anchor-3",x:b.x1,y:b.y2,radius:y,fill:"red",draggable:!0,onDragMove:x({xi:"x1",yi:"y2"}),onDragEnd:j,onMouseEnter:function(){a!==i.Creating&&p(c.neswResize)},onMouseLeave:function(){p()}})))},De=function(e){var t=e.scale,a=e.vertices,n=e.color;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Te.Line,{ref:function(e){e&&e.cache()},points:[a.x1,a.y1,a.x2,a.y1,a.x2,a.y2,a.x1,a.y2,a.x1,a.y1],stroke:n,strokeWidth:1/t,closed:!0}),u.a.createElement(Te.Circle,{x:a.x1,y:a.y1,radius:3/t,fill:n}),u.a.createElement(Te.Circle,{x:a.x2,y:a.y1,radius:3/t,fill:n}),u.a.createElement(Te.Circle,{x:a.x2,y:a.y2,radius:3/t,fill:n}),u.a.createElement(Te.Circle,{x:a.x1,y:a.y2,radius:3/t,fill:n}))},Me=Object(l.memo)((function(e){var t,a,n=e.visible,r=e.imageSize,i=e.label,o=e.changeCursorState,s=e.scale,d=e.setShowOuterRemoveButton,m=e.removeBox,g=Object(l.useState)("#F9526B"),f=Object(J.a)(g,2),p=f[0],E=f[1],h=Object(l.useState)(1.5/s),b=Object(J.a)(h,2),v=b[0],y=b[1];return i.x1<0||i.x2>r.width/s||i.y1<0||i.y2>r.height/s?(t=0,a=-60):i.x1>30/s||i.x2<(r.width-25)/s?(t=i.x1>30/s?i.x1-20/s:i.x2+25/s,a=i.y1>12/s?i.y1-10/s:i.y1+12/s):(t=12/s,a=i.y1>20/s?i.y1-20/s:-60),d(-60===a),Object(l.useEffect)((function(){y(1.5/s)}),[s]),u.a.createElement(Te.Group,{visible:n,x:t,y:a,onMouseEnter:function(){o(c.pointer),E("#E73550"),y(3/s)},onMouseLeave:function(){o(),E("#F9526B"),y(1.5/s)},onClick:function(e){m(),e.cancelBubble=!0}},u.a.createElement(Te.Rect,{x:-5/s,y:-5/s,width:10/s,height:10/s}),u.a.createElement(Te.Line,{points:[-5/s,-5/s,5/s,5/s],stroke:p,strokeWidth:v}),u.a.createElement(Te.Line,{points:[5/s,-5/s,-5/s,5/s],stroke:p,strokeWidth:v}))})),Ue={width:800,height:600},ze=function(e){var t=e.url,a=void 0===t?"":t,n=e.labelingType,r=e.annotations,s=Object(m.b)(),d=Object(l.useCallback)(Re(Ue),[Ue]),g=Object(l.useState)(Ue),f=Object(J.a)(g,2),p=f[0],E=f[1],h=Object(l.useMemo)((function(){return n===o.SingleAnnotation&&1===r.length}),[n,r]),b=Object(l.useState)(c.default),v=Object(J.a)(b,2),y=v[0],O=v[1],C=_e(a,"anonymous"),S=Object(J.a)(C,3),j=S[0],I=S[1],x=S[2],A=Object(l.useState)(null),T=Object(J.a)(A,2),w=T[0],_=T[1],R=Object(l.useState)(i.None),k=Object(J.a)(R,2),P=k[0],L=k[1],N=Object(l.useState)(!1),D=Object(J.a)(N,2),M=D[0],z=D[1],F=Object(l.useState)(!1),G=Object(J.a)(F,2),B=G[0],V=G[1],Q=Object(l.useRef)(1),W=Object(l.useCallback)((function(e){O(e||(h?c.default:c.crosshair))}),[h]),Y=Object(l.useCallback)((function(){s(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"REMOVE_ANNOTATION",payload:{index:e}}}(w)),L(i.None),z(!1)}),[s,w,L,z]),X=function(e){_(e),L(i.Selecting)};return Object(l.useEffect)((function(){h?(W(),_(0)):W()}),[h,W]),Object(l.useEffect)((function(){P!==i.None||h||_(null)}),[P,h]),Object(l.useEffect)((function(){var e=d(x),t=Object(J.a)(e,2),a=t[0],n=t[1];E(a),Q.current=n}),[x,d]),"loading"===I||0===p.height&&0===p.width?u.a.createElement(U.a,{align:"center",color:"red"},"Loading..."):u.a.createElement("div",{style:{margin:"0.2em"}},0!==r.length&&M&&!B&&P!==i.Creating?u.a.createElement(H.a,{iconOnly:!0,text:!0,styles:{color:"#F9526B",":hover":{color:"#E73550"}},content:u.a.createElement(q.CloseIcon,{size:"large"}),onClick:Y}):u.a.createElement("div",{style:{height:"2em"}}),u.a.createElement(Te.Stage,{width:p.width,height:p.height,scale:{x:Q.current,y:Q.current},style:{cursor:y}},u.a.createElement(Te.Layer,{onMouseDown:function(e){var t;h||P===i.Creating||(s((t={x:e.evt.offsetX/Q.current,y:e.evt.offsetY/Q.current},{type:"CREATE_ANNOTATION",payload:{annotation:Le.createWithPoint(t,"")}})),_(r.length-1),L(i.Creating))},onMouseUp:function(e){var t;P===i.Creating&&(s((t={x:e.evt.offsetX/Q.current,y:e.evt.offsetY/Q.current},{type:"UPDATE_CREATING_ANNOTATION",payload:{updater:function(e){return Le.add(t,e)}}})),r.length-1===w?L(i.Selecting):L(i.None))},onDragStart:function(){V(!0)},onDragEnd:function(){V(!1)}},u.a.createElement(Te.Image,{image:j}),r.map((function(e,t){return u.a.createElement(Te.Group,{key:t},u.a.createElement(Me,{imageSize:p,visible:!B&&P!==i.Creating&&t===w,label:e.label,scale:Q.current,changeCursorState:W,setShowOuterRemoveButton:z,removeBox:Y}),u.a.createElement(Ne,{workState:P,onSelect:X,annotation:e,scale:Q.current,annotationIndex:t,selected:t===w,dispatch:s,changeCursorState:W}))})))))},Fe=function(e){return parseInt(e.split("/")[5],10)},Ge=function(e,t){var a=t.partId,n=t.isRelabel,r=void 0!==n&&n;return void 0===a?e:e.filter((function(e){return Fe(e.part)===a&&e.is_relabel===r}))},Je=function(e){if(0===e.length)return!1;var t=e[e.length-1].label;return t.x1===t.x2&&t.y1===t.y2},Be=function(e){var t,a,n=e.labelingType,c=e.imageIndex,i=e.closeDialog,o=e.partId,s=e.isRelabel,d=Object(m.b)(),g=Object(l.useState)(c),f=Object(J.a)(g,2),p=f[0],E=f[1],h=Object(m.c)((function(e){return{images:e.images,annotations:e.labelingPageState.annotations}})),b=h.images,v=h.annotations,y=Ge(b,{partId:o,isRelabel:s}),O=null===(t=y[p])||void 0===t?void 0:t.image,C=null===(a=y[p])||void 0===a?void 0:a.id;return Object(l.useEffect)((function(){return"number"===typeof C&&d(function(e){return function(t,a){var n=a().images.find((function(t){return t.id===e})).labels;if(null===n)t(Pe([]));else{var c=JSON.parse(n).map((function(e){return{label:e,attribute:"",annotationState:r.Finish}}));t(Pe(c))}}}(C)),function(){d({type:"RESET_ANNOTATION"})}}),[d,C]),u.a.createElement(M.a,{column:!0,hAlign:"center"},u.a.createElement(U.a,{size:"larger",weight:"semibold"},"DRAW A RECTANGLE AROUND THE PART"),u.a.createElement(M.a,{vAlign:"center"},!s&&u.a.createElement(H.a,{text:!0,disabled:0===p||Je(v),icon:u.a.createElement(q.ChevronStartIcon,{size:"larger"}),onClick:function(){d(fe(y[p].id,v)),E((function(e){return(e-1+y.length)%y.length}))}}),u.a.createElement(ze,{url:null!==O&&void 0!==O?O:"/icons/Play.png",annotations:v,labelingType:n}),!s&&u.a.createElement(H.a,{text:!0,disabled:p===y.length-1||Je(v),icon:u.a.createElement(q.ChevronEndIcon,{size:"larger"}),onClick:function(){d(fe(y[p].id,v)),E((function(e){return(e+1)%y.length}))}})),u.a.createElement(M.a,{gap:"gap.medium"},u.a.createElement(H.a,{primary:!0,content:"Save",disabled:Je(v),onClick:function(){d(fe(y[p].id,v)),i()}}),u.a.createElement(H.a,{content:"Cancel",onClick:function(){i()}})))},Ve=Object(l.memo)((function(e){var t=e.trigger,a=e.imageIndex,n=e.partId,r=e.isRelabel,c=Object(l.useState)(!1),i=Object(J.a)(c,2),s=i[0],d=i[1];return u.a.createElement(V.a,{trigger:t,styles:{width:"80%"},open:s,onOpen:function(){return d(!0)},content:u.a.createElement(Be,{closeDialog:function(){return d(!1)},labelingType:o.SingleAnnotation,imageIndex:a,partId:n,isRelabel:r})})})),He=function(e){var t=e.labelImage,a=e.labelText,n=void 0===a?"":a,c=e.width,i=void 0===c?300:c,o=e.height,s=void 0===o?150:o,d=e.pointerCursor,m=void 0!==d&&d,g=e.onClick,f=_e(t.image,"anonymous"),p=Object(J.a)(f,3),E=p[0],h=(p[1],p[2]),b=Object(l.useState)({width:i,height:s}),v=Object(J.a)(b,2),y=v[0],O=v[1],C=Object(l.useCallback)(Re({width:i,height:s}),[i,s]),S=Object(l.useRef)(1),j=Object(l.useMemo)((function(){return(null===t||void 0===t?void 0:t.labels)?JSON.parse(t.labels).map((function(e){return{label:e,attribute:"",annotationState:r.Finish}})):[]}),[t]);return Object(l.useEffect)((function(){var e=C(h),t=Object(J.a)(e,2),a=t[0],n=t[1];O(a),S.current=n}),[h,C]),u.a.createElement("div",{onClick:g,style:{cursor:m?"pointer":"default"}},u.a.createElement(M.a,{column:!0},u.a.createElement(Te.Stage,{width:y.width,height:y.height,scale:{x:S.current,y:S.current}},u.a.createElement(Te.FastLayer,null,u.a.createElement(Te.Image,{image:E}),j.map((function(e,t){return u.a.createElement(De,{key:t,scale:S.current,vertices:e.label,color:"red"})})))),u.a.createElement(U.a,{align:"center"},n)))},qe=function(e){return Array.isArray(e)?e.map((function(e){return{header:e.name,content:{key:e.id}}})):e?{header:e.name,content:{key:e.id}}:null},Qe=function(e){var t=e.partId,a=Object(l.useState)(null),n=Object(J.a)(a,2),r=n[0],c=n[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(We,{selectedCamera:r,setSelectedCamera:c}),u.a.createElement(Ee,{selectedCamera:r,partId:t,canCapture:!0}),u.a.createElement(Ye,{partId:t}))},We=function(e){var t=e.selectedCamera,a=e.setSelectedCamera,n=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.cameras}));return Object(l.useEffect)((function(){e(K())}),[e]),t}(),r=n.map((function(e){return{header:e.name,content:{key:e.id}}}));return u.a.createElement(M.a,{gap:"gap.small",vAlign:"center"},u.a.createElement(U.a,null,"Select Camera"),u.a.createElement(Ae.a,{items:r,onChange:function(e,t){if(null===t.value)a((function(e){return e}));else{var r=t.value.content.key,c=n.find((function(e){return e.id===r}));c&&a(c)}},value:qe(t)}),u.a.createElement(L.b,{to:"/addCamera"},"Add Camera"))},Ye=function(e){var t=e.partId,a=Object(m.b)(),n=Object(m.c)((function(e){return e.images})).filter((function(e){return!e.is_relabel})),r=Ge(n,{partId:t,isRelabel:!1}),c=r.filter((function(e){return e.labels})).length>=15;Object(l.useEffect)((function(){a(me())}),[a]);var i=r.length;return u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,null,"Total: ",i),!c&&u.a.createElement(U.a,{error:!0},"*Please capture and label more then 15 images"),u.a.createElement(M.a,{styles:{overflow:"scroll",border:"1px solid grey",height:"150px",borderColor:c?"":"red"},gap:"gap.small",vAlign:"center"},r.map((function(e,a){return u.a.createElement("div",{key:e.id},u.a.createElement("span",null,a+1),u.a.createElement(Ve,{key:a,imageIndex:a,partId:t,trigger:u.a.createElement(He,{labelImage:e,pointerCursor:!0,width:200,height:150}),isRelabel:!1}))}))),u.a.createElement(D.a,{when:i<15,message:"The count of images is less than 15, which may cause error when configure part identification. Sure you want to leave?"}))},Xe=function(e){var t=e.partId,a=Object(m.b)(),n=Object(m.c)((function(e){return e.images})),r=Ge(n,{partId:t,isRelabel:!1}),c=r.filter((function(e){return e.labels})).length>=15;return Object(l.useEffect)((function(){a(me())}),[a]),u.a.createElement(u.a.Fragment,null,u.a.createElement("input",{type:"file",onChange:function(e){for(var n=0;n<e.target.files.length;n++){var r=new FormData;r.append("image",e.target.files[n]),r.append("part","/api/parts/".concat(t,"/")),a(ge(r))}},accept:"image/*",multiple:!0}),u.a.createElement(Ke,{capturedImages:r,isValid:c,partId:t}))},Ke=function(e){var t=e.capturedImages,a=e.isValid,n=e.partId;return u.a.createElement(u.a.Fragment,null,!a&&u.a.createElement(U.a,{error:!0},"*Please capture and label more then 15 images"),u.a.createElement(B.a,{columns:"2",styles:{border:"1px solid grey",height:"100%",gridGap:"10px",padding:"10px",borderColor:a?"":"red",justifyItems:"center",alignItems:"center"}},t.map((function(e,t){return u.a.createElement(Ve,{key:t,imageIndex:t,trigger:u.a.createElement(He,{labelImage:e,pointerCursor:!0,width:300,height:225}),partId:n,isRelabel:!1})}))))},$e=function(){var e=be().get("partId");return u.a.createElement(B.a,{columns:"repeat(12, 1fr)",styles:{gridColumnGap:"20px",height:"100%"}},u.a.createElement(Ze,{partId:e}),u.a.createElement(et,{partId:e}))},Ze=function(e){var t=e.partId,a=Object(l.useState)(""),n=Object(J.a)(a,2),r=n[0],c=n[1],i=Object(l.useState)(""),o=Object(J.a)(i,2),s=o[0],d=o[1],m=Object(l.useState)(""),g=Object(J.a)(m,2),f=g[0],p=g[1],E=Object(D.h)();Object(l.useEffect)((function(){t&&Y.a.get("/api/parts/".concat(t,"/")).then((function(e){var t=e.data;c(t.name),d(t.description)})).catch((function(e){console.error(e)}))}),[t]);return u.a.createElement(M.a,{column:!0,space:"around",styles:{gridColumn:"1 / span 4"}},u.a.createElement(Q.a,{placeholder:"Enter Part Name...",fluid:!0,styles:{fontSize:"2em"},value:r,onChange:function(e,t){c(t.value)}}),u.a.createElement(Ie.a,{placeholder:"Enter Description...",design:{height:"80%"},value:s,onChange:function(e,t){d(t.value)}}),u.a.createElement(M.a,{space:"around"},u.a.createElement(H.a,{content:"Save",primary:!0,onClick:function(){var e=![void 0,null].includes(t),a=e?"/api/parts/".concat(t,"/"):"/api/parts/";Y()({method:e?"PUT":"POST",url:a,data:{name:r,description:s}}).then((function(e){var t=e.data;E.push("/parts/detail/capturePhotos?partId=".concat(t.id))})).catch((function(e){p(JSON.stringify(e.response.data))}))},disabled:!r||!s}),u.a.createElement(H.a,{content:"Cancel"})),!!f&&u.a.createElement(te.a,{danger:!0,content:f,dismissible:!0}))},et=function(e){var t=e.partId;return u.a.createElement(M.a,{column:!0,gap:"gap.small",styles:{gridColumn:"5 / span 8"}},t?u.a.createElement(tt,{partId:t}):null,u.a.createElement(D.e,null,u.a.createElement(D.c,{path:"/parts/detail/capturePhotos"},u.a.createElement(Qe,{partId:parseInt(t,10)})),u.a.createElement(D.c,{path:"/parts/detail/uploadPhotos"},u.a.createElement(Xe,{partId:parseInt(t,10)}))))},tt=function(e){var t=e.partId,a=[{key:"uploadPhotos",as:L.b,to:"/parts/detail/uploadPhotos?partId=".concat(t),content:"Upload Photos"},{key:"capturePhotos",as:L.b,to:"/parts/detail/capturePhotos?partId=".concat(t),content:"Capture Photo"}],n=Object(D.i)().pathname,r=a.findIndex((function(e){return e.to.split("?")[0]===n}));return u.a.createElement(xe.a,{items:a,activeIndex:r,pointing:!0,primary:!0})},at=function(e){return console.error(e),{type:"REQUEST_LOCATION_FAILURE"}},nt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.locations}));return Object(l.useEffect)((function(){e((function(e){return fetch("/api/locations/").then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"GET_LOCATION_SUCCESS",payload:e}}(t))})).catch((function(t){e(at(t))}))}))}),[e]),u.a.createElement(M.a,{column:!0,gap:"gap.large",padding:"padding.medium",styles:{height:"100%"}},u.a.createElement(B.a,{columns:"8",styles:{height:"75%"}},t.map((function(e,t){return u.a.createElement(F,{key:t,to:"/locations/detail?name=".concat(e.name),defaultSrc:"/icons/defaultLocation.png",width:"100px",height:"100px",label:e.name})}))),u.a.createElement(M.a,{hAlign:"end"},u.a.createElement(L.b,{to:"/locations/register"},u.a.createElement(H.a,{primary:!0,fluid:!0,circular:!0,content:u.a.createElement(q.AddIcon,{size:"largest",circular:!0}),style:{width:"6em",height:"6em"}}))))},rt=a(230),ct=function(){var e=Object(m.b)(),t=Object(D.h)(),a=Object(l.useState)(""),n=Object(J.a)(a,2),r=n[0],c=n[1],i=Object(l.useState)(""),o=Object(J.a)(i,2),s=o[0],d=o[1],g=Object(l.useState)(""),f=Object(J.a)(g,2),p=f[0],E=f[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{size:"larger",weight:"semibold"},"Register Location"),u.a.createElement(rt.a,{color:"black"}),u.a.createElement(B.a,{columns:"15% 3fr 2fr",styles:{height:"60%"}},u.a.createElement(M.a,{column:!0,gap:"gap.large"},u.a.createElement(F,{defaultSrc:"/icons/defaultLocation.png",width:"100px",height:"100px"}),u.a.createElement(U.a,null,"Coordinates:"),u.a.createElement(U.a,null,"Description:")),u.a.createElement(M.a,{column:!0,gap:"gap.large"},u.a.createElement(Q.a,{styles:{paddingTop:"10px",minHeight:"100px"},placeholder:"Location Name",value:r,onChange:function(e,t){return c(t.value)}}),u.a.createElement(Q.a,{value:s,onChange:function(e,t){return d(t.value)}}),u.a.createElement(Ie.a,{styles:{height:"60%"},value:p,onChange:function(e,t){return E(t.value)}}))),u.a.createElement(M.a,{gap:"gap.medium",padding:"padding.medium"},u.a.createElement(H.a,{primary:!0,disabled:[r,s,p].includes(""),onClick:function(){var a;e((a={name:r,coordinates:s,description:p},function(e){return fetch("/api/locations/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"POST_LOCATION_SUCCESS",payload:e}}(t))})).catch((function(t){e(at(t))}))})),t.push("/locations")},content:"Save"}),u.a.createElement(H.a,{content:"Cancel",onClick:function(){t.push("/locations")}})))},it=function(){var e=be().get("name"),t=Object(m.c)((function(t){return t.locations.find((function(t){return t.name===e}))}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{size:"larger",weight:"semibold"},"Details"),u.a.createElement(rt.a,{color:"black"}),u.a.createElement(B.a,{columns:"15% 3fr 2fr",styles:{height:"60%"}},u.a.createElement(M.a,{column:!0,gap:"gap.large"},u.a.createElement(F,{defaultSrc:"/icons/defaultLocation.png",width:"100px",height:"100px"}),u.a.createElement(U.a,null,"Coordinates:"),u.a.createElement(U.a,null,"Description:")),u.a.createElement(M.a,{column:!0,gap:"gap.large"},u.a.createElement(U.a,{styles:{paddingTop:"10px",minHeight:"100px"}},t.name),u.a.createElement(U.a,null,t.coordinates),u.a.createElement(U.a,{styles:{height:"60%"}},t.description))))},ot=a(493),lt=a(241),ut=a(258),st=a(360),dt=(a(936),a(937),!1),mt=function(e){var t,a=e.confidenceLevel,n=e.labelImage,r=e.imageIndex,c=e.judgedImages,i=e.setJudgedImages,o=e.partId;return t=c.correct.indexOf(n.id)>=0?1:c.incorrect.indexOf(n.id)>=0?0:null,u.a.createElement(M.a,{hAlign:"center",padding:"padding.medium"},u.a.createElement("div",{style:{margin:"0.2em"}},u.a.createElement(He,{labelImage:n,width:100,height:100})),u.a.createElement(M.a,{column:!0,gap:"gap.smaller",styles:{width:"30%"}},u.a.createElement(U.a,{truncated:!0},"Confidence Level: ",a,"%"),u.a.createElement(M.a,{column:!0},u.a.createElement(lt.a,{checkedValue:t,onCheckedValueChange:function(e,t){i((function(e){if(1===t.value){var a=e.incorrect.indexOf(n.id),r=e.correct.indexOf(n.id);a>=0&&e.incorrect.splice(a,1),-1===r&&e.correct.push(n.id)}if(0===t.value){var c=e.correct.indexOf(n.id),i=e.incorrect.indexOf(n.id);c>=0&&e.correct.splice(c,1),-1===i&&e.incorrect.push(n.id)}return Object(S.a)({},e)}))},items:[{key:"1",label:"Yes",value:1},{key:"0",label:"No",value:0}]})),u.a.createElement(Ve,{imageIndex:r,isRelabel:!0,partId:o,trigger:u.a.createElement(H.a,{primary:!0,content:"Identify",disabled:!t})})))},gt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return{projectData:e.project.data,images:e.images}})),a=t.projectData,n=t.images,r=he(),c=Object(l.useMemo)((function(){return 0===r.length||0===a.parts.length?[]:a.parts.map((function(e){var t=r.find((function(t){return t.id===e}));return{header:t.name,content:{key:t.id}}}))}),[r,a]),i=Object(l.useState)(null),o=Object(J.a)(i,2),s=o[0],d=o[1],g=Object(l.useState)([a.accuracyRangeMin,a.accuracyRangeMax]),f=Object(J.a)(g,2),p=f[0],E=f[1],h=Object(l.useState)(!1),b=Object(J.a)(h,2),v=b[0],y=b[1],O=Object(l.useState)({correct:[],incorrect:[]}),C=Object(J.a)(O,2),j=C[0],I=C[1],x=Object(l.useMemo)((function(){var e=Ge(n,{partId:s,isRelabel:!0}).map((function(e){return Object(S.a)({},e,{confidenceLevel:(1e3*e.confidence|0)/10})})).filter((function(e){return e.confidenceLevel>=p[0]&&e.confidenceLevel<=p[1]}));return dt&&(v?e.sort((function(e,t){return e.confidenceLevel-t.confidenceLevel})):e.sort((function(e,t){return t.confidenceLevel-e.confidenceLevel}))),e}),[p,v,n,s]);Object(l.useEffect)((function(){e(ce()),e(me())}),[e]);var A=c.find((function(e){return e.content.key===s}));return u.a.createElement("div",null,u.a.createElement(U.a,{size:"larger",weight:"semibold"},"Manual Identification"),u.a.createElement(rt.a,{color:"black"}),u.a.createElement(M.a,{column:!0,gap:"gap.medium",space:"between",styles:{height:"75vh",padding:"1em"}},u.a.createElement(B.a,{columns:"3",styles:{columnGap:"1em",justifyItems:"center"}},u.a.createElement(M.a,{vAlign:"center",gap:"gap.smaller"},u.a.createElement(U.a,{truncated:!0},"Select Part:"),u.a.createElement(Ae.a,{items:c,onChange:function(e,t){var a=t.value;if(null===a)d((function(e){return e}));else{var n=a.content.key;d(n)}},value:A})),u.a.createElement(M.a,{vAlign:"center",gap:"gap.smaller",styles:{width:"80%"}},u.a.createElement(U.a,null,"Confidence Level:"),u.a.createElement("div",{style:{width:"70%"}},u.a.createElement(st.b,{value:p,allowCross:!1,onChange:function(e){return E(e)},handle:function(e){var t=e.value,a=e.dragging,n=e.index,r=Object(ot.a)(e,["value","dragging","index"]);return u.a.createElement(ut.a,{prefixCls:"rc-slider-tooltip",overlay:"".concat(t,"%"),visible:a,placement:"top",key:n},u.a.createElement(st.a,Object.assign({value:t},r)))}}))),u.a.createElement(M.a,{vAlign:"center"},u.a.createElement(U.a,{truncated:!0},"Sort:"),u.a.createElement(H.a,{icon:v?u.a.createElement(q.ArrowDownIcon,null):u.a.createElement(q.ArrowUpIcon,null),styles:{color:dt?"#0094d8":"grey"},text:!0,iconOnly:!0,onClick:function(){dt=!0,y((function(e){return!e}))}}))),u.a.createElement(B.a,{columns:"2",styles:{width:"100%",height:"80%",borderStyle:"solid",overflow:"scroll",borderWidth:"1px"}},x.map((function(e,t){return u.a.createElement(mt,{key:t,confidenceLevel:e.confidenceLevel,imageIndex:t,labelImage:e,judgedImages:j,setJudgedImages:I,partId:s})}))),u.a.createElement(H.a,{content:"Update",styles:{width:"15%"},primary:!0,disabled:0===j.correct.length&&0===j.incorrect.length,onClick:function(){Y()({method:"POST",url:"/api/relabel/update",data:j}).then((function(){e(me()),I({correct:[],incorrect:[]})})).catch((function(e){console.error(e)}))}})))},ft=function(){var e=Object(l.useState)([]),t=Object(J.a)(e,2),a=t[0],n=t[1],r=Y.a.get("/api/parts/"),c=Y.a.get("/api/images/");return Object(l.useEffect)((function(){Y.a.all([r,c]).then(Y.a.spread((function(){var e=arguments.length<=0?void 0:arguments[0],t=e.data,a=arguments.length<=1?void 0:arguments[1],r=a.data;n(t.map((function(e){var t;return Object(S.a)({},e,{images:null===(t=r.find((function(t){return Fe(t.part)===e.id})))||void 0===t?void 0:t.image})})))}))).catch((function(e){return console.error(e)}))}),[]),u.a.createElement("div",{style:{position:"relative",height:"100%"}},u.a.createElement(M.a,{gap:"gap.large",wrap:!0},a.map((function(e){return u.a.createElement(pt,{key:e.id,src:e.images,id:e.id,name:e.name})}))),u.a.createElement(H.a,{primary:!0,fluid:!0,circular:!0,content:u.a.createElement(q.AddIcon,{size:"largest",circular:!0}),style:{width:100,height:100,position:"fixed",right:"100px",bottom:"100px"},as:L.b,to:"/parts/detail"}))},pt=function(e){var t=e.src,a=e.id,n=e.name;return u.a.createElement(M.a,{column:!0,hAlign:"center",gap:"gap.large",as:L.b,to:"/parts/detail/capturePhotos?partId=".concat(a)},u.a.createElement("div",{style:{width:"250px",height:"250px"}},u.a.createElement(z.a,{src:t,styles:{width:"100%",height:"100%",objectFit:"cover"}})),u.a.createElement(U.a,{size:"larger"},n))},Et=a(172),ht=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.project})),a=t.isLoading,n=t.error,r=t.data,c=r.id,i=r.camera,o=r.location,s=r.parts,d=r.needRetraining,g=r.accuracyRangeMin,f=r.accuracyRangeMax,p=r.maxImages,E=bt("cameras"),h=Object(J.a)(E,4),b=h[0],v=h[1],y=h[2],O=h[3],C=bt("parts",!0),j=Object(J.a)(C,4),I=j[0],x=j[1],A=j[2],T=j[3],w=bt("locations"),_=Object(J.a)(w,4),R=_[0],k=_[1],P=_[2],N=_[3],z=Object(D.h)(),F=Object(l.useState)(!1),G=Object(J.a)(F,2),B=G[0],V=G[1];Object(l.useEffect)((function(){b||I||R||e(ce())}),[e,b,R,I]),Object(l.useEffect)((function(){o&&N(o),s.length&&T(s),i&&O(i)}),[i,o,s,O,N,T]);var q=function(t,a){e({type:"UPDATE_PROJECT_DATA",payload:Object(S.a)({},r,Object(ke.a)({},t,a))})};return u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{size:"larger",weight:"semibold"},"Part Identification"),u.a.createElement(rt.a,{color:"black"}),n&&u.a.createElement(te.a,{danger:!0,header:"Load Part Identification Error",content:"".concat(n.name,": ").concat(n.message)}),u.a.createElement(M.a,{column:!0,gap:"gap.large",design:{paddingTop:"30px"}},u.a.createElement(vt,{moduleName:"cameras",to:"/cameras",value:y,setSelectedModuleItem:O,items:v,isMultiple:!1}),u.a.createElement(vt,{moduleName:"parts",to:"/parts",value:A,setSelectedModuleItem:T,items:x,isMultiple:!0}),u.a.createElement(vt,{moduleName:"locations",to:"/locations",value:P,setSelectedModuleItem:N,items:k,isMultiple:!1}),u.a.createElement(Et.a,{label:"Set up retraining",checked:d,onChange:function(e,t){var a=t.checked;return q("needRetraining",a)}}),u.a.createElement(U.a,{disabled:!d},"Accuracy Range"),u.a.createElement(U.a,{disabled:!d},"Minimum:"," ",u.a.createElement(Q.a,{type:"number",disabled:!d,inline:!0,value:g,onChange:function(e,t){var a=t.value;return q("accuracyRangeMin",a)}}),"%"),u.a.createElement(U.a,{disabled:!d},"Maximum:"," ",u.a.createElement(Q.a,{type:"number",disabled:!d,inline:!0,value:f,onChange:function(e,t){var a=t.value;return q("accuracyRangeMax",a)}}),"%"),u.a.createElement(U.a,{disabled:!d},"Maximum Images:"," ",u.a.createElement(Q.a,{type:"number",disabled:!d,inline:!0,value:p,onChange:function(e,t){var a=t.value;V(a<15),q("maxImages",a)}}),B&&u.a.createElement(U.a,{error:!0},"Cannot be less than 15")),u.a.createElement(L.b,{to:""},"Advanced Configuration"),u.a.createElement(H.a,{content:"Configure",primary:!0,onClick:function(){e(function(e,t,a,n){return function(r,c){var i=null===e,o=i?"/api/projects/":"/api/projects/".concat(e,"/");r({type:"POST_PROJECT_REQUEST"});var l=c().project.data;return Y()(o,{data:{location:"http://localhost:8000/api/locations/".concat(t.id,"/"),parts:a.map((function(e){return"http://localhost:8000/api/parts/".concat(e.id,"/")})),camera:"http://localhost:8000/api/cameras/".concat(n.id,"/"),download_uri:l.modelUrl,needRetraining:l.needRetraining,accuracyRangeMin:l.accuracyRangeMin,accuracyRangeMax:l.accuracyRangeMax,maxImages:l.maxImages},method:i?"POST":"PUT",headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data;return r({type:"POST_PROJECT_SUCCESS"}),oe(t.id),t.id})).catch((function(e){r({type:"POST_PROJECT_FALIED",error:e})}))}}(c,P,A,y)).then((function(e){"undefined"!==typeof e&&z.push("/cameras/detail?name=".concat(y.name))})).catch((function(e){return e}))},disabled:!y||!P||!A||a,loading:a})))};function bt(e,t){var a=Object(l.useRef)([]),n=Object(l.useState)([]),r=Object(J.a)(n,2),c=r[0],i=r[1],o=Object(l.useState)(t?[]:null),u=Object(J.a)(o,2),s=u[0],d=u[1],m=Object(l.useState)(!0),g=Object(J.a)(m,2),f=g[0],p=g[1];return Object(l.useEffect)((function(){p(!0),fetch("/api/".concat(e,"/")).then((function(e){return e.json()})).then((function(e){i(e.map((function(e){return{header:e.name,content:{key:e.id}}}))),a.current=e,p(!1)})).catch((function(e){p(!1),console.error(e)}))}),[e]),[f,c,s,Object(l.useCallback)((function(e){if(Array.isArray(e)){var t=e.reduce((function(e,t){var n=a.current.find((function(e){return e.id.toString(10)===t.toString()}));return n&&e.push(n),e}),[]);d(t)}else{var n=a.current.find((function(t){return t.id.toString(10)===e.toString()}));n&&d(n)}}),[])]}var vt=function(e){var t=e.moduleName,a=e.to,n=e.value,r=e.setSelectedModuleItem,c=e.items,i=e.isMultiple;return u.a.createElement(M.a,{vAlign:"center",gap:"gap.medium"},u.a.createElement(U.a,{styles:{width:"150px"}},"Select ".concat(t)),u.a.createElement(Ae.a,{items:c,onChange:function(e,t){if(null===t.value)r((function(e){return e}));else if(Array.isArray(t.value)){var a=t.value.map((function(e){return e.content.key}));r(a)}else{var n=t.value.content.key;r(n)}},value:qe(n),multiple:i}),u.a.createElement(L.b,{to:a},"Add ".concat(t)))},yt=function(){var e=Object(l.useState)({id:null,key:"",namespace:"",iotHubConnectionString:"",deviceId:"",moduleId:""}),t=Object(J.a)(e,2),a=t[0],n=t[1],r=Object(l.useState)({success:!1,content:""}),c=Object(J.a)(r,2),i=c[0],o=c[1];Object(l.useEffect)((function(){Y.a.get("/api/settings/").then((function(e){var t=e.data;t.length>0&&n({id:t[0].id,key:t[0].training_key,namespace:t[0].endpoint,iotHubConnectionString:t[0].iot_hub_connection_string,deviceId:t[0].device_id,moduleId:t[0].module_id})})).catch((function(e){console.error(e)}))}),[]);return u.a.createElement(M.a,{column:!0,gap:"gap.large"},u.a.createElement("h1",null,"Setting"),u.a.createElement(rt.a,{color:"grey"}),u.a.createElement(U.a,{size:"large",weight:"bold"},"Azure Cognitive Services Settings:"," "),u.a.createElement(M.a,{vAlign:"center"},u.a.createElement(U.a,{size:"large",design:{width:"300px"}},"Namespace:"),u.a.createElement(Q.a,{value:a.namespace,onChange:function(e,t){var a=t.value;return n((function(e){return Object(S.a)({},e,{namespace:a})}))}})),u.a.createElement(M.a,{vAlign:"center"},u.a.createElement(U.a,{size:"large",design:{width:"300px"}},"Key:"),u.a.createElement(Q.a,{value:a.key,onChange:function(e,t){var a=t.value;return n((function(e){return Object(S.a)({},e,{key:a})}))}})),u.a.createElement(M.a,{vAlign:"center"},u.a.createElement(U.a,{size:"large",design:{width:"300px"}},"Iot Hub Connection String:"),u.a.createElement(Q.a,{value:a.iotHubConnectionString,onChange:function(e,t){var a=t.value;return n((function(e){return Object(S.a)({},e,{iotHubConnectionString:a})}))}})),u.a.createElement(M.a,{vAlign:"center"},u.a.createElement(U.a,{size:"large",design:{width:"300px"}},"Device ID:"),u.a.createElement(Q.a,{value:a.deviceId,onChange:function(e,t){var a=t.value;return n((function(e){return Object(S.a)({},e,{deviceId:a})}))}})),u.a.createElement(M.a,{vAlign:"center"},u.a.createElement(U.a,{size:"large",design:{width:"300px"}},"Module ID:"),u.a.createElement(Q.a,{value:a.moduleId,onChange:function(e,t){var a=t.value;return n((function(e){return Object(S.a)({},e,{moduleId:a})}))}})),u.a.createElement(M.a,{gap:"gap.large"},u.a.createElement(H.a,{primary:!0,onClick:function(){var e=null===a.id,t=e?"/api/settings/":"/api/settings/".concat(a.id,"/");Y()(t,{data:{training_key:a.key,endpoint:a.namespace,iot_hub_connection_string:a.iotHubConnectionString,device_id:a.deviceId,module_id:a.moduleId},method:e?"POST":"PUT"}).then((function(){o({success:!0,content:"Save Setting Successfully"})})).catch((function(e){o({success:!1,content:"Fail to save settings: /n ".concat(e.toString())})}))},disabled:Object.values(a).some((function(e){return!e}))},"Save"),u.a.createElement(H.a,{primary:!0,as:L.b,to:"/"},"Cancel")),i.content?u.a.createElement(te.a,{success:i.success,danger:!i.success,content:i.content,dismissible:!0}):null)},Ot=function(){return u.a.createElement(D.e,null,u.a.createElement(D.c,{path:"/manual",component:gt}),u.a.createElement(D.c,{path:"/locations/register",component:ct}),u.a.createElement(D.c,{path:"/locations/detail",component:it}),u.a.createElement(D.c,{path:"/locations",component:nt}),u.a.createElement(D.c,{path:"/cameras/detail",component:je}),u.a.createElement(D.c,{path:"/cameras",component:$}),u.a.createElement(D.c,{path:"/parts/detail",component:$e}),u.a.createElement(D.c,{path:"/parts",component:ft}),u.a.createElement(D.c,{path:"/partIdentification",component:ht}),u.a.createElement(D.c,{path:"/setting",component:yt}),u.a.createElement(D.c,{path:"/",component:G}))},Ct=a(235),St=function(){var e=Object(D.i)().pathname;if("/"===e)return u.a.createElement(U.a,{color:"black"},"Home");var t=e.split("/").slice(1).reduce((function(e,t){var a=function(e){switch(e){case"cameras":return"Camera";case"parts":return"Part";case"locations":return"Location";case"register":return"Register";case"label":return"Label";case"manual":return"Identify Manually";case"detail":return"Details";case"partIdentification":return"Job Configuration";case"capturePhotos":case"uploadPhotos":return null;default:return"string"===typeof e?"Details":null}}(t);if(!a)return e;var n="".concat(e.path,"/").concat(t);return{pathTitles:[].concat(Object(C.a)(e.pathTitles),[{title:a,to:n}]),path:n}}),{pathTitles:[],path:""}).pathTitles;return u.a.createElement(M.a,{gap:"gap.smaller"},u.a.createElement(L.b,{to:"/",style:{color:"#0094d8",textDecoration:"none"}},u.a.createElement(U.a,null,"Home")),t.map((function(e,t,a){return u.a.createElement(l.Fragment,{key:t},u.a.createElement(U.a,{color:"black"},">"),t===a.length-1?u.a.createElement(U.a,{color:"black"},e.title):u.a.createElement(L.b,{to:"".concat(e.to),style:{color:"#0094d8",textDecoration:"none"}},u.a.createElement(U.a,null,e.title)))})))},jt=function(e){var t=e.children;return u.a.createElement(B.a,{columns:"60px auto",rows:"50px auto",design:{height:"100vh"},styles:{justifyContent:"stretch"}},u.a.createElement(It,null),u.a.createElement(xt,{styles:{gridColumn:"1 / span 1",gridRow:"2 / span 1",boxShadow:"1px 0px 10px 0px rgba(0,0,0,0.75)",zIndex:1}}),u.a.createElement(Ct.a,{styles:{gridColumn:"span 1",padding:"30px"}},u.a.createElement(St,null),t))},It=function(){return u.a.createElement(M.a,{space:"between",vAlign:"center",padding:"padding.medium",styles:{backgroundColor:"#0094d8",gridColumn:"1 / span 2",boxShadow:"0px 1px 10px 0px rgba(0,0,0,0.75)",zIndex:2,fontSize:"20px",padding:"0.5em 1em"}},u.a.createElement(M.a,{gap:"gap.large",vAlign:"center"},u.a.createElement(q.MenuIcon,{size:"large",styles:{color:"white"}}),u.a.createElement(L.c,{to:"/",style:{textDecoration:"none"}},u.a.createElement(U.a,{color:"white"},"Vision on Edge"))),u.a.createElement(M.a,{vAlign:"center",hAlign:"end",gap:"gap.medium",styles:{height:"100%"}},u.a.createElement(L.b,{to:"/setting",style:{height:"100%"}},u.a.createElement(z.a,{styles:{height:"100%"},src:"/icons/setting.png"})),u.a.createElement(U.a,{color:"white"},"User")))},xt=function(e){var t=e.styles;return u.a.createElement(Ct.a,{color:"grey",inverted:!0,styles:Object(S.a)({},t,{padding:0,paddingTop:"1em"})},u.a.createElement(M.a,{column:!0,gap:"gap.large",hAlign:"center"},u.a.createElement(At,{src:"/icons/location.png",to:"/locations"}),u.a.createElement(At,{src:"/icons/camera.png",to:"/cameras"}),u.a.createElement(At,{src:"/icons/part.png",to:"/parts"}),u.a.createElement(At,{src:"/icons/manual.png",to:"/manual"}),u.a.createElement(At,{src:"/icons/partIdentification.png",to:"/partIdentification"})))},At=function(e){var t=e.src,a=e.to;return u.a.createElement(L.c,{to:a,style:{display:"flex",justifyContent:"center",padding:"0.8em"},activeStyle:{backgroundColor:"rgba(250, 83, 5, 0.5)"}},u.a.createElement(z.a,{src:t,design:{width:"100%"}}))},Tt={siteVariables:{colors:{brand:{50:"#f3fafd",100:"#d1ecf9",200:"#aadcf4",300:"#5dbce8",400:"#1ba0dd",500:"#0094d8",600:"#0085c3",700:"#0071a5",800:"#005379",900:"black"}},colorScheme:{brand:{foreground:"#0094d8",background:"#0094d8",border:"#E1DFDD",shadow:"#000",foregroundHover:"#0094d8",backgroundHover:"#0085c3",borderHover:"#5dbce8",shadowHover:"#000",foregroundActive:"#0094d8",backgroundActive:"#0094d8",borderActive:"#E1DFDD",shadowActive:void 0,foregroundFocus:"#0094d8",backgroundFocus:"#0094d8",borderFocus:"#000",shadowFocus:void 0,foregroundPressed:"#0071a5",backgroundPressed:"#0071a5",borderPressed:"#5dbce8",shadowPressed:void 0,foregroundDisabled:"#C8C6C4",backgroundDisabled:"#EDEBE9",borderDisabled:"#EDEBE9",shadowDisabled:void 0,foreground1:"#0094d8",foreground2:"#0085c3",foreground3:"#aadcf4",foreground4:"#fff",background1:"#d1ecf9",background2:"#005379",background3:"#373644",background4:"#0071a5",border1:"#aadcf4",border2:"#5dbce8",foregroundHover1:"#fff",foregroundHover2:"#aadcf4",backgroundHover1:"#f3fafd",foregroundPressed1:"#fff",foregroundActive1:"#0094d8",foregroundActive2:"#aadcf4",backgroundActive1:"#0094d8",borderActive1:"#aadcf4",borderActive2:"#5dbce8",foregroundFocus1:"#0094d8",foregroundFocus2:"#0085c3",foregroundFocus3:"#aadcf4",foregroundFocus4:"#fff",backgroundFocus1:"#d1ecf9",backgroundFocus2:"#005379",backgroundFocus3:"#373644",borderFocusWithin:"#fff",borderFocus1:"#0094d8",foregroundDisabled1:"#C8C6C4",backgroundDisabled1:"#EDEBE9"}}}},wt=Object(q.mergeThemes)(q.themes.teams,Tt),_t=function(){return u.a.createElement(N.a,{theme:wt},u.a.createElement(L.a,null,u.a.createElement("div",{className:"App"},u.a.createElement(jt,null,u.a.createElement(Ot,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Rt=P(y),kt=Rt.store,Pt=Rt.persistor;d.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(m.a,{store:kt},u.a.createElement(g.a,{loading:u.a.createElement("div",null,"Loading.."),persistor:Pt},u.a.createElement(_t,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[688,1,2]]]);
//# sourceMappingURL=main.82b8fe3f.chunk.js.map